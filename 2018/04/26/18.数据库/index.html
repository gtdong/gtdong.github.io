<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.2">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" integrity="sha256-DfWjNxDkM94fVBWx1H5BMMp0Zq7luBlV8QRcSES7s+0=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"gtdong.github.io","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.11.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"gitalk","active":true,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":true}}</script><script src="/js/config.js"></script>

    <meta name="description" content="1 数据库分类">
<meta property="og:type" content="article">
<meta property="og:title" content="TsukiBlog">
<meta property="og:url" content="https://gtdong.github.io/2018/04/26/18.%E6%95%B0%E6%8D%AE%E5%BA%93/index.html">
<meta property="og:site_name" content="TsukiBlog">
<meta property="og:description" content="1 数据库分类">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://gitee.com/gtdong/images/raw/master/blog/image-20210427153114123.png">
<meta property="article:published_time" content="2018-04-26T05:05:00.000Z">
<meta property="article:modified_time" content="2022-04-30T16:12:01.077Z">
<meta property="article:author" content="Michaeldong">
<meta property="article:tag" content="Python">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://gitee.com/gtdong/images/raw/master/blog/image-20210427153114123.png">


<link rel="canonical" href="https://gtdong.github.io/2018/04/26/18.%E6%95%B0%E6%8D%AE%E5%BA%93/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://gtdong.github.io/2018/04/26/18.%E6%95%B0%E6%8D%AE%E5%BA%93/","path":"2018/04/26/18.数据库/","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title> | TsukiBlog</title>
  




<link rel="stylesheet" href="//cdn.jsdelivr.net/gh/theme-next/theme-next-needmoreshare2@1/needsharebutton.min.css"><style>
#needsharebutton-postbottom {
  cursor: pointer;
  height: 26px;
  margin-top: 10px;
  position: relative;
}
#needsharebutton-postbottom .btn {
  border: 1px solid $btn-default-border-color;
  border-radius: 3px;
  display: initial;
  padding: 1px 4px;
}
</style>
  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">TsukiBlog</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#1-%E6%95%B0%E6%8D%AE%E5%BA%93%E5%88%86%E7%B1%BB"><span class="nav-number">1.</span> <span class="nav-text">1 数据库分类</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2-MySQL%E7%AE%80%E4%BB%8B"><span class="nav-number">2.</span> <span class="nav-text">2 MySQL简介</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#3-%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE"><span class="nav-number">3.</span> <span class="nav-text">3 安装与配置</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#3-1-%E9%87%8D%E8%A6%81%E6%A6%82%E5%BF%B5%E4%BB%8B%E7%BB%8D"><span class="nav-number">3.1.</span> <span class="nav-text">3.1 重要概念介绍</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-2-%E4%B8%8B%E8%BD%BD%E4%B8%8E%E5%AE%89%E8%A3%85"><span class="nav-number">3.2.</span> <span class="nav-text">3.2 下载与安装</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-3-%E5%81%9A%E6%88%90%E7%B3%BB%E7%BB%9F%E6%9C%8D%E5%8A%A1"><span class="nav-number">3.3.</span> <span class="nav-text">3.3 做成系统服务</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-4-%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95"><span class="nav-number">3.4.</span> <span class="nav-text">3.4 用户登录</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-5-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="nav-number">3.5.</span> <span class="nav-text">3.5 配置文件</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#4-%E5%9F%BA%E6%9C%ACSQL%E8%AF%AD%E5%8F%A5"><span class="nav-number">4.</span> <span class="nav-text">4  基本SQL语句</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BA%93%E3%80%81%E8%A1%A8%E3%80%81%E8%AE%B0%E5%BD%95%E7%9A%84%E5%A2%9E%E3%80%81%E5%88%A0%E3%80%81%E6%94%B9%E3%80%81%E6%9F%A5"><span class="nav-number">4.1.</span> <span class="nav-text">库、表、记录的增、删、改、查</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#5-%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E"><span class="nav-number">5.</span> <span class="nav-text">5 存储引擎</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#6-MySQL%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="nav-number">6.</span> <span class="nav-text">6 MySQL基本数据类型</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#6-1-%E7%B1%BB%E5%9E%8B%E5%88%86%E7%B1%BB"><span class="nav-number">6.1.</span> <span class="nav-text">6.1 类型分类</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#6-1-1-%E6%95%B4%E5%9E%8B"><span class="nav-number">6.1.1.</span> <span class="nav-text">6.1.1 整型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-1-2-%E6%B5%AE%E7%82%B9%E5%9E%8B"><span class="nav-number">6.1.2.</span> <span class="nav-text">6.1.2 浮点型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-1-3%E5%AD%97%E7%AC%A6%E7%B1%BB%E5%9E%8B"><span class="nav-number">6.1.3.</span> <span class="nav-text">6.1.3字符类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-1-4-%E6%97%A5%E6%9C%9F%E7%B1%BB%E5%9E%8B"><span class="nav-number">6.1.4.</span> <span class="nav-text">6.1.4 日期类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-1-5-%E6%9E%9A%E4%B8%BE%E4%B8%8E%E9%9B%86%E5%90%88"><span class="nav-number">6.1.5.</span> <span class="nav-text">6.1.5 枚举与集合</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-2-%E4%B8%A5%E6%A0%BC%E6%A8%A1%E5%BC%8F"><span class="nav-number">6.2.</span> <span class="nav-text">6.2 严格模式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-3-%E5%AD%97%E7%AC%A6%E7%B1%BB%E5%9E%8B%E5%AF%B9%E6%AF%94"><span class="nav-number">6.3.</span> <span class="nav-text">6.3 字符类型对比</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-4-%E5%88%9B%E5%BB%BA%E8%A1%A8%E7%9A%84%E5%AE%8C%E6%95%B4%E8%AF%AD%E6%B3%95"><span class="nav-number">6.4.</span> <span class="nav-text">6.4 创建表的完整语法</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7-%E7%BA%A6%E6%9D%9F%E6%9D%A1%E4%BB%B6"><span class="nav-number">7.</span> <span class="nav-text">7 约束条件</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#7-1-%E5%88%86%E7%B1%BB"><span class="nav-number">7.1.</span> <span class="nav-text">7.1 分类</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#unsigned-%E3%80%81zerofill%E3%80%81not-null%E3%80%81default%E3%80%81unique%E3%80%81primary-key%E3%80%81auto-increment"><span class="nav-number">7.1.1.</span> <span class="nav-text">unsigned 、zerofill、not null、default、unique、primary key、auto_increment</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-2-%E4%B8%BB%E9%94%AE%E7%9A%84%E7%89%B9%E5%BE%81"><span class="nav-number">7.2.</span> <span class="nav-text">7.2 主键的特征</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-3-%E5%A4%96%E9%94%AE"><span class="nav-number">7.3.</span> <span class="nav-text">7.3 外键</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#7-3-1-%E8%A1%A8%E5%85%B3%E7%B3%BB"><span class="nav-number">7.3.1.</span> <span class="nav-text">7.3.1 表关系</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-3-2-SQL%E8%AF%AD%E5%8F%A5%E5%BB%BA%E7%AB%8B%E8%A1%A8%E5%85%B3%E7%B3%BB"><span class="nav-number">7.3.2.</span> <span class="nav-text">7.3.2 SQL语句建立表关系</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-3-3-%E7%BA%A7%E8%81%94%E6%9B%B4%E6%96%B0%E7%BA%A7%E8%81%94%E5%88%A0%E9%99%A4"><span class="nav-number">7.3.3.</span> <span class="nav-text">7.3.3 级联更新级联删除</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%9C%E4%B8%9A"><span class="nav-number">7.3.4.</span> <span class="nav-text">作业</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#8-%E6%9F%A5%E8%AF%A2%E5%85%B3%E9%94%AE%E5%AD%97"><span class="nav-number">8.</span> <span class="nav-text">8 查询关键字</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#8-1-select-from-where"><span class="nav-number">8.1.</span> <span class="nav-text">8.1 select from where</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-2-%E6%9F%A5%E8%AF%A2%E5%85%B3%E9%94%AE%E5%AD%97%E4%B9%8Bwhere"><span class="nav-number">8.2.</span> <span class="nav-text">8.2 查询关键字之where</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-3-%E6%9F%A5%E8%AF%A2%E5%85%B3%E9%94%AE%E5%AD%97%E4%B9%8Bgroup-by%E5%88%86%E7%BB%84"><span class="nav-number">8.3.</span> <span class="nav-text">8.3 查询关键字之group by分组</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-4-%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0"><span class="nav-number">8.4.</span> <span class="nav-text">8.4 聚合函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%9C%E4%B8%9A-1"><span class="nav-number">8.5.</span> <span class="nav-text">作业</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-5-%E6%9F%A5%E8%AF%A2%E5%85%B3%E9%94%AE%E5%AD%97%E4%B9%8Bhaving%E8%BF%87%E6%BB%A4"><span class="nav-number">8.6.</span> <span class="nav-text">8.5 查询关键字之having过滤</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-6-%E6%9F%A5%E8%AF%A2%E5%85%B3%E9%94%AE%E5%AD%97%E4%B9%8Bdistinct%E5%8E%BB%E9%87%8D"><span class="nav-number">8.7.</span> <span class="nav-text">8.6 查询关键字之distinct去重</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-7-%E6%9F%A5%E8%AF%A2%E5%85%B3%E9%94%AE%E5%AD%97%E4%B9%8Border-by%E6%8E%92%E5%BA%8F"><span class="nav-number">8.8.</span> <span class="nav-text">8.7 查询关键字之order by排序</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-8-%E6%9F%A5%E8%AF%A2%E5%85%B3%E9%94%AE%E5%AD%97%E4%B9%8Blimit%E5%88%86%E9%A1%B5"><span class="nav-number">8.9.</span> <span class="nav-text">8.8 查询关键字之limit分页</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#8-9-%E6%9F%A5%E8%AF%A2%E5%85%B3%E9%94%AE%E5%AD%97%E4%B9%8Bregexp%E6%AD%A3%E5%88%99"><span class="nav-number">8.9.1.</span> <span class="nav-text">8.9 查询关键字之regexp正则</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#9-%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2"><span class="nav-number">9.</span> <span class="nav-text">9 多表查询</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#9-1-%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2%E6%80%9D%E6%83%B3"><span class="nav-number">9.1.</span> <span class="nav-text">9.1 多表查询思想</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9-2-%E5%89%8D%E6%9C%9F%E8%A1%A8%E5%87%86%E5%A4%87"><span class="nav-number">9.2.</span> <span class="nav-text">9.2 前期表准备</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9-3-%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="nav-number">9.3.</span> <span class="nav-text">9.3 子查询</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9-4-%E8%BF%9E%E8%A1%A8%E6%93%8D%E4%BD%9C"><span class="nav-number">9.4.</span> <span class="nav-text">9.4 连表操作</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9-5-Navicat%E5%8F%AF%E8%A7%86%E5%8C%96%E8%BD%AF%E4%BB%B6"><span class="nav-number">9.5.</span> <span class="nav-text">9.5 Navicat可视化软件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9-6-%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2SQL%E6%96%87%E4%BB%B6"><span class="nav-number">9.6.</span> <span class="nav-text">9.6 多表查询SQL文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9-7-%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2%E9%A2%98"><span class="nav-number">9.7.</span> <span class="nav-text">9.7 多表查询题</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%9C%E4%B8%9A%E5%B8%83%E7%BD%AE"><span class="nav-number">9.8.</span> <span class="nav-text">作业布置</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#10-%E8%A1%A8%E5%AD%97%E6%AE%B5%E6%93%8D%E4%BD%9C%E8%A1%A5%E5%85%85"><span class="nav-number">10.</span> <span class="nav-text">10 表字段操作补充</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#11-python%E6%93%8D%E4%BD%9CMySQL-%E6%8E%8C%E6%8F%A1"><span class="nav-number">11.</span> <span class="nav-text">11 python操作MySQL(掌握)</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#12-SQL%E6%B3%A8%E5%85%A5"><span class="nav-number">12.</span> <span class="nav-text">12 SQL注入</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#13-%E5%85%B6%E4%BB%96%E6%93%8D%E4%BD%9C"><span class="nav-number">13.</span> <span class="nav-text">13 其他操作</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#14-%E8%A7%86%E5%9B%BE"><span class="nav-number">14.</span> <span class="nav-text">14 视图</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#14-1-%E8%87%B4%E5%91%BD%E4%B8%89%E9%97%AE"><span class="nav-number">14.1.</span> <span class="nav-text">14.1 致命三问</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#14-1-1-%E4%BB%80%E4%B9%88%E6%98%AF%E8%A7%86%E5%9B%BE"><span class="nav-number">14.1.1.</span> <span class="nav-text">14.1.1 什么是视图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#14-1-2-%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E7%94%A8%E8%A7%86%E5%9B%BE"><span class="nav-number">14.1.2.</span> <span class="nav-text">14.1.2 为什么要用视图</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#14-1-3%E5%A6%82%E4%BD%95%E7%94%A8%E8%A7%86%E5%9B%BE"><span class="nav-number">14.1.2.1.</span> <span class="nav-text">14.1.3如何用视图</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#15-%E8%A7%A6%E5%8F%91%E5%99%A8"><span class="nav-number">15.</span> <span class="nav-text">15 触发器</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#15-1-%E8%87%B4%E5%91%BD%E4%B8%89%E9%97%AE"><span class="nav-number">15.1.</span> <span class="nav-text">15.1 致命三问</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#15-1-1-%E4%BB%80%E4%B9%88%E6%98%AF%E8%A7%A6%E5%8F%91%E5%99%A8"><span class="nav-number">15.1.1.</span> <span class="nav-text">15.1.1 什么是触发器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#15-1-2-%E4%B8%BA%E4%BD%95%E8%A6%81%E7%94%A8%E8%A7%A6%E5%8F%91%E5%99%A8"><span class="nav-number">15.1.2.</span> <span class="nav-text">15.1.2  为何要用触发器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#15-1-3-%E5%A6%82%E4%BD%95%E7%94%A8%E8%A7%A6%E5%8F%91%E5%99%A8"><span class="nav-number">15.1.3.</span> <span class="nav-text">15.1.3 如何用触发器</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#16-%E4%BA%8B%E5%8A%A1"><span class="nav-number">16.</span> <span class="nav-text">16 事务</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#16-1-%E8%87%B4%E5%91%BD%E4%B8%89%E9%97%AE"><span class="nav-number">16.1.</span> <span class="nav-text">16.1 致命三问</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#16-1-1-%E4%BB%80%E4%B9%88%E6%98%AF%E4%BA%8B%E5%8A%A1"><span class="nav-number">16.1.1.</span> <span class="nav-text">16.1.1 什么是事务</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#16-1-2-%E4%BA%8B%E5%8A%A1%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="nav-number">16.1.2.</span> <span class="nav-text">16.1.2 事务的作用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#16-1-3-%E5%A6%82%E4%BD%95%E7%94%A8%E4%BA%8B%E5%8A%A1"><span class="nav-number">16.1.3.</span> <span class="nav-text">16.1.3 如何用事务</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#17-%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B"><span class="nav-number">17.</span> <span class="nav-text">17 存储过程</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#17-1-%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="nav-number">17.1.</span> <span class="nav-text">17.1 基本使用</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#17-2-%E4%B8%89%E7%A7%8D%E5%BC%80%E5%8F%91%E6%A8%A1%E5%9E%8B"><span class="nav-number">17.2.</span> <span class="nav-text">17.2  三种开发模型</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#17-2-1-%E7%AC%AC%E4%B8%80%E7%A7%8D"><span class="nav-number">17.2.1.</span> <span class="nav-text">17.2.1 第一种</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#17-2-2-%E7%AC%AC%E4%BA%8C%E7%A7%8D"><span class="nav-number">17.2.2.</span> <span class="nav-text">17.2.2 第二种</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#17-2-3-%E7%AC%AC%E4%B8%89%E7%A7%8D"><span class="nav-number">17.2.3.</span> <span class="nav-text">17.2.3 第三种</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#17-3-%E5%88%9B%E5%BB%BA%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B"><span class="nav-number">17.2.4.</span> <span class="nav-text">17.3  创建存储过程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#17-4-%E5%A6%82%E4%BD%95%E7%94%A8%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B"><span class="nav-number">17.2.5.</span> <span class="nav-text">17.4 如何用存储过程</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#18-%E5%87%BD%E6%95%B0"><span class="nav-number">18.</span> <span class="nav-text">18 函数</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#19-%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6"><span class="nav-number">19.</span> <span class="nav-text">19 流程控制</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#20-%E7%B4%A2%E5%BC%95"><span class="nav-number">20.</span> <span class="nav-text">20 索引</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#20-1-%E7%B4%A2%E5%BC%95%E5%9F%BA%E7%A1%80"><span class="nav-number">20.1.</span> <span class="nav-text">20.1 索引基础</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#20-2-b-%E6%A0%91"><span class="nav-number">20.2.</span> <span class="nav-text">20.2 b+树</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#20-3-%E8%81%9A%E9%9B%86%E7%B4%A2%E5%BC%95-primary-key"><span class="nav-number">20.3.</span> <span class="nav-text">20.3 聚集索引(primary key)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#20-4-%E8%BE%85%E5%8A%A9%E7%B4%A2%E5%BC%95-unique-index"><span class="nav-number">20.4.</span> <span class="nav-text">20.4 辅助索引(unique,index)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#20-5-%E6%B5%8B%E8%AF%95%E7%B4%A2%E5%BC%95"><span class="nav-number">20.5.</span> <span class="nav-text">20.5 测试索引</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#20-6-%E8%81%94%E5%90%88%E7%B4%A2%E5%BC%95"><span class="nav-number">20.6.</span> <span class="nav-text">20.6 联合索引</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#20-7%E4%BD%9C%E4%B8%9A"><span class="nav-number">20.7.</span> <span class="nav-text">20.7作业</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Michaeldong"
      src="/images/avatar.jpeg">
  <p class="site-author-name" itemprop="name">Michaeldong</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">81</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">8</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">18</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="sidebar-button site-overview-item animated">
    <button><i class="fa fa-comment"></i>
      Chat
    </button>
  </div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/gtdong" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;gtdong" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>



        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="返回顶部">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="reading-progress-bar"></div>

  <a href="https://github.com/gtdong" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://gtdong.github.io/2018/04/26/18.%E6%95%B0%E6%8D%AE%E5%BA%93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="Michaeldong">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="TsukiBlog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content=" | TsukiBlog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2018-04-26 13:05:00" itemprop="dateCreated datePublished" datetime="2018-04-26T13:05:00+08:00">2018-04-26</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-05-01 00:12:01" itemprop="dateModified" datetime="2022-05-01T00:12:01+08:00">2022-05-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Python%E4%B9%8B%E8%B7%AF/" itemprop="url" rel="index"><span itemprop="name">Python之路</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>38k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>34 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h1 id="1-数据库分类"><a href="#1-数据库分类" class="headerlink" title="1 数据库分类"></a>1 数据库分类</h1><span id="more"></span>

<p>数据库本质就是一款cs架构软件,分为 <strong>关系型数据库</strong>和<strong>非关系型数据库</strong></p>
<ul>
<li><strong>关系型数据库</strong>:固定表结构并且表与表之间可以建关系<ul>
<li>MySQL、PostgreSQL、sqlite，db2，oracle，access，sql server…</li>
</ul>
</li>
<li><strong>非关系型数据库</strong>：没有固定表结构并且存储数据以kv键值对形式<ul>
<li>mongodb，redis，memcache…</li>
</ul>
</li>
</ul>
<h1 id="2-MySQL简介"><a href="#2-MySQL简介" class="headerlink" title="2 MySQL简介"></a>2 MySQL简介</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">本质也是一款基于网络通信的应用程序</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line">任何基于网络通信的软件底层肯定都是socket</span><br><span class="line">简单地说MySQL的架构如下：</span><br><span class="line">	-服务端</span><br><span class="line">		-基于socket通信</span><br><span class="line">		-本地文件操作</span><br><span class="line">		-解析指令(SQL语句)  </span><br><span class="line"></span><br><span class="line">	-客户端</span><br><span class="line">		-基于socket通信</span><br><span class="line">		-发送指令</span><br><span class="line">		-解析指令(SQL语句)</span><br><span class="line"></span><br><span class="line">SQL语句的由来</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">MySQL不单单支持MySQL客户端操作，也支持其他编程语言来操作。python、java、php、c++、go语法都不一样 那MySQL如何做到兼容的呢？</span></span><br><span class="line"><span class="string">这里有两种解决语言障碍的思路：</span></span><br><span class="line"><span class="string">		1.自己精通多国语言 轻松自如的切换</span></span><br><span class="line"><span class="string">		2.采用统一的语言(SQL语句)</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>
<h1 id="3-安装与配置"><a href="#3-安装与配置" class="headerlink" title="3 安装与配置"></a>3 安装与配置</h1><h2 id="3-1-重要概念介绍"><a href="#3-1-重要概念介绍" class="headerlink" title="3.1 重要概念介绍"></a>3.1 重要概念介绍</h2><p>数据库里的数据到底是是以什么格式存储的呢，我们拿它和我们电脑里的文件做一个对比：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">库			&gt;&gt;&gt;			  文件夹</span></span><br><span class="line"><span class="string">表			&gt;&gt;&gt;			  文件夹里面的文件</span></span><br><span class="line"><span class="string">记录	 &gt;&gt;&gt;			 文件内一行行的数据</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">表头	&gt;&gt;&gt;				  表格的第一行数据</span></span><br><span class="line"><span class="string">字段	&gt;&gt;&gt;					字段名+字段类型</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<h2 id="3-2-下载与安装"><a href="#3-2-下载与安装" class="headerlink" title="3.2 下载与安装"></a>3.2 下载与安装</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>版本问题</span><br><span class="line">	<span class="number">5.6</span>  这里我们安装的是<span class="number">5.6</span>版本</span><br><span class="line">  <span class="number">5.7</span></span><br><span class="line">  <span class="number">5.8</span></span><br><span class="line">  </span><br><span class="line"><span class="number">2.</span>下载</span><br><span class="line">	官网下载压缩包</span><br><span class="line">  解压到固定地址</span><br><span class="line">  简单启动</span><br><span class="line">    	mysql.exe	   客户端</span><br><span class="line">      mysqld.exe	 服务端</span><br></pre></td></tr></table></figure>

<h2 id="3-3-做成系统服务"><a href="#3-3-做成系统服务" class="headerlink" title="3.3 做成系统服务"></a>3.3 做成系统服务</h2><p>步骤如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 本步骤是针对的windows用户</span></span><br><span class="line"><span class="number">1.</span>环境变量添加</span><br><span class="line"><span class="number">2.</span>系统服务制作(全部在管理员身份下操作)</span><br><span class="line">	<span class="comment"># 查看系统服务</span></span><br><span class="line">    services.msc</span><br><span class="line">	<span class="comment"># 制作成系统服务</span></span><br><span class="line">    mysqld --install</span><br><span class="line">    <span class="comment"># 取消系统服务</span></span><br><span class="line">    mysqld --remove</span><br><span class="line">    <span class="comment"># 启动服务</span></span><br><span class="line">    net start mysql</span><br><span class="line">    <span class="comment"># 停止服务</span></span><br><span class="line">    net stop mysql</span><br></pre></td></tr></table></figure>

<h2 id="3-4-用户登录"><a href="#3-4-用户登录" class="headerlink" title="3.4 用户登录"></a>3.4 用户登录</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mysql -u用户名 -p密码  <span class="comment"># 管理员初次登录无需密码</span></span><br><span class="line"><span class="comment"># mysql游客模式		</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 忘记密码</span></span><br><span class="line">	<span class="number">1.</span>跳过授权表启动</span><br><span class="line">		mysqld --skip-grant-tables</span><br><span class="line">  <span class="number">2.</span>无密码登录</span><br><span class="line">    mysql -uroot -p</span><br><span class="line">  <span class="number">3.</span>修改用户密码</span><br><span class="line">    update mysql.user <span class="built_in">set</span> password=password(<span class="number">123</span>) where user=<span class="string">&quot;root&quot;</span> <span class="keyword">and</span> host=<span class="string">&quot;localhost&quot;</span>;  <span class="comment"># 修改对应用户的密码</span></span><br><span class="line">	<span class="number">4.</span>退出正常启动</span><br></pre></td></tr></table></figure>

<h2 id="3-5-配置文件"><a href="#3-5-配置文件" class="headerlink" title="3.5 配置文件"></a>3.5 配置文件</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">MySQL默认配置文件my-default.ini不能修改</span><br><span class="line">拷贝并重命名my.ini</span><br><span class="line"></span><br><span class="line"><span class="comment"># \s查看基本信息</span></span><br><span class="line"></span><br><span class="line">文件内容</span><br><span class="line">[mysqld]</span><br><span class="line">character-<span class="built_in">set</span>-server=utf8</span><br><span class="line">collation-server=utf8_general_ci</span><br><span class="line">[client]</span><br><span class="line">default-character-<span class="built_in">set</span>=utf8</span><br><span class="line">[mysql]</span><br><span class="line">default-character-<span class="built_in">set</span>=utf8</span><br></pre></td></tr></table></figure>

<h1 id="4-基本SQL语句"><a href="#4-基本SQL语句" class="headerlink" title="4  基本SQL语句"></a>4  基本SQL语句</h1><h2 id="库、表、记录的增、删、改、查"><a href="#库、表、记录的增、删、改、查" class="headerlink" title="库、表、记录的增、删、改、查"></a>库、表、记录的增、删、改、查</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##########################  库  ###############################</span></span><br><span class="line"><span class="comment"># 增</span></span><br><span class="line">create database db1 charset=<span class="string">&#x27;utf8&#x27;</span>;</span><br><span class="line"><span class="comment"># 改</span></span><br><span class="line">alter database db1 charset=<span class="string">&#x27;gbk&#x27;</span>;</span><br><span class="line"><span class="comment"># 查</span></span><br><span class="line">show databases;</span><br><span class="line">show create database db1;</span><br><span class="line"><span class="comment"># 删</span></span><br><span class="line">drop database db1;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">##########################   表   ###############################</span></span><br><span class="line">user db1;  <span class="comment"># 切换文件夹</span></span><br><span class="line">select database();  <span class="comment"># 查看当前所在的库</span></span><br><span class="line"><span class="comment"># 增</span></span><br><span class="line">create table t1(<span class="built_in">id</span> <span class="built_in">int</span>,name char(<span class="number">4</span>));  <span class="comment"># 创建出来的可能是多个文件，解耦管理</span></span><br><span class="line"><span class="comment"># 改</span></span><br><span class="line">alter table t1 modify name char(<span class="number">16</span>);</span><br><span class="line"><span class="comment"># 查</span></span><br><span class="line">show tables;</span><br><span class="line">show create table t1;		<span class="comment"># 查看表的详细信息</span></span><br><span class="line">describe t1; == desc t1;  <span class="comment"># 查看表结构</span></span><br><span class="line"><span class="comment"># 删</span></span><br><span class="line">drop table t1;</span><br><span class="line"></span><br><span class="line"><span class="comment">##########################   记录   ###############################</span></span><br><span class="line"><span class="comment"># 增</span></span><br><span class="line">insert into db1.t1 values (<span class="number">1</span>,<span class="string">&#x27;tom&#x27;</span>);  <span class="comment"># 单</span></span><br><span class="line">insert into db1.t1 values (<span class="number">2</span>,<span class="string">&#x27;tom&#x27;</span>),(<span class="number">3</span>,<span class="string">&#x27;tony&#x27;</span>),(<span class="number">4</span>,<span class="string">&#x27;jason&#x27;</span>);  <span class="comment"># 多</span></span><br><span class="line"><span class="comment"># 改</span></span><br><span class="line">update db1.t1 <span class="built_in">set</span> name=<span class="string">&#x27;DSB&#x27;</span> where <span class="built_in">id</span> &gt; <span class="number">1</span>;</span><br><span class="line">update db1.t1 <span class="built_in">set</span> name=<span class="string">&#x27;DSB&#x27;</span> where <span class="built_in">id</span> = <span class="number">2</span> <span class="keyword">or</span> <span class="built_in">id</span> = <span class="number">3</span>;</span><br><span class="line"><span class="comment"># 查</span></span><br><span class="line">select <span class="built_in">id</span>,name <span class="keyword">from</span> db1.t1;  <span class="comment"># db1可不指定，默认当前库下</span></span><br><span class="line">select * <span class="keyword">from</span> t1;</span><br><span class="line"><span class="comment"># 删</span></span><br><span class="line">delete <span class="keyword">from</span> db1.t1 where <span class="built_in">id</span> &gt;<span class="number">3</span>;</span><br><span class="line">delete <span class="keyword">from</span> db1.t1 where name=<span class="string">&#x27;jason&#x27;</span>; </span><br><span class="line">delete <span class="keyword">from</span> db1.t1;  <span class="comment"># 将t1表所有的数据都删除</span></span><br></pre></td></tr></table></figure>
<h1 id="5-存储引擎"><a href="#5-存储引擎" class="headerlink" title="5 存储引擎"></a>5 存储引擎</h1><p>存储引擎决定了一个数据库存取数据的方式</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看所有的存储引擎</span></span><br><span class="line">show engines;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 需要知道的有四个</span></span><br><span class="line">MyISAM</span><br><span class="line">	  MySQL5<span class="number">.5</span>及之前版本默认的存储引擎</span><br><span class="line">    存取数据的速度都非常快 但是功能较少安全性较低</span><br><span class="line">InnoDB</span><br><span class="line">	  MySQL5<span class="number">.6</span>及之后版本默认的存储引擎</span><br><span class="line">    存取数据速度没有MyISAM快 但是功能更多 安全性更高</span><br><span class="line">    支持：事务 行锁 外键</span><br><span class="line">BlackHole</span><br><span class="line">	  往里面写入的任何数据都会直接消失</span><br><span class="line">Memory</span><br><span class="line">	  内存存储数据</span><br><span class="line">  </span><br><span class="line"><span class="comment"># 存储数据的特点</span></span><br><span class="line">create table t1(<span class="built_in">id</span> <span class="built_in">int</span>) engine=InnoDB;</span><br><span class="line">create table t2(<span class="built_in">id</span> <span class="built_in">int</span>) engine=MyISAM;</span><br><span class="line">create table t3(<span class="built_in">id</span> <span class="built_in">int</span>) engine=BlackHole;</span><br><span class="line">create table t4(<span class="built_in">id</span> <span class="built_in">int</span>) engine=Memory;</span><br><span class="line">    </span><br><span class="line"><span class="comment"># 文件个数不一致</span></span><br><span class="line">InnoDB</span><br><span class="line">	  .frm	表结构</span><br><span class="line">    .ibd	表数据和索引(类似于书的目录)</span><br><span class="line">MyISAM</span><br><span class="line">	  .frm	表结构</span><br><span class="line">    .MYD	表数据</span><br><span class="line">    .MYI	索引(类似于书的目录)</span><br><span class="line">BlackHole</span><br><span class="line">	  .frm	表结构</span><br><span class="line">Memory</span><br><span class="line">	  .frm	表结构</span><br><span class="line">    </span><br><span class="line"><span class="comment"># 验证</span></span><br><span class="line">insert into t1 values(<span class="number">1</span>);</span><br><span class="line">insert into t2 values(<span class="number">1</span>);</span><br><span class="line">insert into t3 values(<span class="number">1</span>);</span><br><span class="line">insert into t4 values(<span class="number">1</span>);</span><br><span class="line"><span class="string">&quot;&quot;&quot;乐观锁与悲观锁&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<h1 id="6-MySQL基本数据类型"><a href="#6-MySQL基本数据类型" class="headerlink" title="6 MySQL基本数据类型"></a>6 MySQL基本数据类型</h1><h2 id="6-1-类型分类"><a href="#6-1-类型分类" class="headerlink" title="6.1 类型分类"></a>6.1 类型分类</h2><h3 id="6-1-1-整型"><a href="#6-1-1-整型" class="headerlink" title="6.1.1 整型"></a>6.1.1 整型</h3><p><img src="https://gitee.com/gtdong/images/raw/master/blog/image-20210427153114123.png" alt="image-20210427153114123"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">tinyint smallint <span class="built_in">int</span> bigint</span><br><span class="line"><span class="number">1.</span>不同的类型能够存储的数字范围不一样</span><br><span class="line"> <span class="number">2.</span>验证是否自带符号</span><br><span class="line">   	create table t5(<span class="built_in">id</span> tinyint);</span><br><span class="line">     insert into t5 values(-<span class="number">129</span>),(<span class="number">256</span>);</span><br><span class="line">       <span class="comment"># 结论:所有的整型都是自带符号</span></span><br><span class="line">   <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">   如果不想让整型有符号</span></span><br><span class="line"><span class="string">   	create table t6(id tinyint unsigned);</span></span><br><span class="line"><span class="string">   	insert into t6 values(-129),(256);</span></span><br><span class="line"><span class="string">   &quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>
<h3 id="6-1-2-浮点型"><a href="#6-1-2-浮点型" class="headerlink" title="6.1.2 浮点型"></a>6.1.2 浮点型</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">float</span>(<span class="number">255</span>,<span class="number">30</span>)</span><br><span class="line">   	总共<span class="number">255</span>位小数占<span class="number">30</span>位</span><br><span class="line"> double(<span class="number">255</span>,<span class="number">30</span>)</span><br><span class="line">   	总共<span class="number">255</span>位小数占<span class="number">30</span>位</span><br><span class="line"> decimal(<span class="number">65</span>,<span class="number">30</span>)</span><br><span class="line">   	总共<span class="number">65</span>位小数占<span class="number">30</span>位</span><br><span class="line">   </span><br><span class="line"> create table t7(<span class="built_in">id</span> <span class="built_in">float</span>(<span class="number">255</span>,<span class="number">30</span>));</span><br><span class="line"> create table t8(<span class="built_in">id</span> double(<span class="number">255</span>,<span class="number">30</span>));</span><br><span class="line"> create table t9(<span class="built_in">id</span> decimal(<span class="number">65</span>,<span class="number">30</span>));</span><br><span class="line"> insert into t7 values(<span class="number">1.111111111111111111111111111111</span>);</span><br><span class="line"> insert into t8 values(<span class="number">1.111111111111111111111111111111</span>);</span><br><span class="line"> insert into t9 values(<span class="number">1.111111111111111111111111111111</span>);</span><br><span class="line"> </span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">精确度不一样</span></span><br><span class="line"><span class="string">	float &lt; double &lt; decimal</span></span><br><span class="line"><span class="string">	</span></span><br><span class="line"><span class="string">在实际开发中 很多时候看似需要用数字存储的数据</span></span><br><span class="line"><span class="string">其实我们可能都是使用的字符串存储</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>
<h3 id="6-1-3字符类型"><a href="#6-1-3字符类型" class="headerlink" title="6.1.3字符类型"></a>6.1.3字符类型</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">char(<span class="number">4</span>)</span><br><span class="line">   	最大存储四个字符 超出了直接报错 不超过空格填充至四位</span><br><span class="line"> varchar(<span class="number">4</span>)</span><br><span class="line">   	最大存储四个字符 超出了直接报错 不超过有几位存几位</span><br><span class="line">   create table t10(<span class="built_in">id</span> <span class="built_in">int</span>,name char(<span class="number">4</span>));</span><br><span class="line">   create table t11(<span class="built_in">id</span> <span class="built_in">int</span>,name varchar(<span class="number">4</span>));</span><br><span class="line">   insert into t10 values(<span class="number">1</span>,<span class="string">&#x27;jason&#x27;</span>);</span><br><span class="line">   insert into t11 values(<span class="number">1</span>,<span class="string">&#x27;jason&#x27;</span>);</span><br><span class="line">   </span><br><span class="line">   <span class="comment"># 由于我们修改了配置并且没有指定sql_mode</span></span><br><span class="line">  	<span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">  	1.拷贝sql_mode到自己的配置文件</span></span><br><span class="line"><span class="string">  	2.修改</span></span><br><span class="line"><span class="string">  	&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>
<h3 id="6-1-4-日期类型"><a href="#6-1-4-日期类型" class="headerlink" title="6.1.4 日期类型"></a>6.1.4 日期类型</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">datetime	年月日 时分秒</span><br><span class="line"> time			时分秒</span><br><span class="line"> date			年月日</span><br><span class="line"> year			年</span><br><span class="line">   create table t13(</span><br><span class="line">   	<span class="built_in">id</span> <span class="built_in">int</span>,</span><br><span class="line">       name varchar(<span class="number">32</span>),</span><br><span class="line">       reg_time datetime,</span><br><span class="line">       study_time time,</span><br><span class="line">       birth date,</span><br><span class="line">       r_time year</span><br><span class="line">   );</span><br><span class="line">   insert into t13 values(<span class="number">1</span>,<span class="string">&#x27;jason&#x27;</span>,<span class="string">&#x27;2000-11-11 11:11:11&#x27;</span>,<span class="string">&#x27;11:11:11&#x27;</span>,<span class="string">&#x27;2000-01-21&#x27;</span>,<span class="string">&#x27;1995&#x27;</span>);</span><br></pre></td></tr></table></figure>
<h3 id="6-1-5-枚举与集合"><a href="#6-1-5-枚举与集合" class="headerlink" title="6.1.5 枚举与集合"></a>6.1.5 枚举与集合</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">枚举		多选一</span><br><span class="line">   	create table t14(</span><br><span class="line">       	<span class="built_in">id</span> <span class="built_in">int</span>,</span><br><span class="line">           name char(<span class="number">16</span>),</span><br><span class="line">           gender enum(<span class="string">&#x27;male&#x27;</span>,<span class="string">&#x27;female&#x27;</span>,<span class="string">&#x27;others&#x27;</span>)</span><br><span class="line">       );</span><br><span class="line">   </span><br><span class="line">   集合		多选多(多选一)</span><br><span class="line">   	create table t15(</span><br><span class="line">       	<span class="built_in">id</span> <span class="built_in">int</span>,</span><br><span class="line">           name char(<span class="number">32</span>),</span><br><span class="line">           hobby <span class="built_in">set</span>(<span class="string">&#x27;read&#x27;</span>,<span class="string">&#x27;study&#x27;</span>,<span class="string">&#x27;music&#x27;</span>,<span class="string">&#x27;tea&#x27;</span>)</span><br><span class="line">       );</span><br></pre></td></tr></table></figure>
<h2 id="6-2-严格模式"><a href="#6-2-严格模式" class="headerlink" title="6.2 严格模式"></a>6.2 严格模式</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看sql_mode</span></span><br><span class="line">show variables like <span class="string">&#x27;%mode%&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改</span></span><br><span class="line"><span class="built_in">set</span> <span class="keyword">global</span> sql_mode=<span class="string">&#x27;strict_trans_tables&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 退出客户端重新进入即可</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 验证是否自动填充</span></span><br><span class="line"><span class="built_in">set</span> <span class="keyword">global</span> sql_mode=<span class="string">&#x27;strict_trans_tables,pad_char_to_full_length&#x27;</span>;</span><br></pre></td></tr></table></figure>
<h2 id="6-3-字符类型对比"><a href="#6-3-字符类型对比" class="headerlink" title="6.3 字符类型对比"></a>6.3 字符类型对比</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">char(<span class="number">4</span>)</span><br><span class="line">	  优点:整存整取 速度快</span><br><span class="line">    缺点:浪费硬盘空间</span><br><span class="line">varchar(<span class="number">4</span>)</span><br><span class="line">	  优点:节省硬盘空间</span><br><span class="line">    缺点:速度没有char快</span><br><span class="line">    </span><br><span class="line">char(<span class="number">5</span>) varchar(<span class="number">5</span>)</span><br><span class="line">jasonkevintony egon jack tom</span><br><span class="line">1<span class="built_in">bytes</span>+jason1bytes+kevin1bytes+tony1bytes+egon1bytes+jack1bytes+tom </span><br><span class="line"></span><br><span class="line"><span class="comment"># 到底用char还是varchar?</span></span><br><span class="line">	各有优缺点 具体结合实际情况</span><br><span class="line">    </span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">针对整型字段 括号里面的数字不是用来限制存储长度而是用来控制展示长度</span></span><br><span class="line"><span class="string">ps:如果不理解 直接记结论</span></span><br><span class="line"><span class="string">	定义整型字段无需自己写括号和数字</span></span><br><span class="line"><span class="string">	int</span></span><br><span class="line"><span class="string">	tinyint</span></span><br><span class="line"><span class="string">	</span></span><br><span class="line"><span class="string">	create table t12(id int(4) zerofill);</span></span><br><span class="line"><span class="string">	insert into t12 values(1),(11111111);</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<h2 id="6-4-创建表的完整语法"><a href="#6-4-创建表的完整语法" class="headerlink" title="6.4 创建表的完整语法"></a>6.4 创建表的完整语法</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">create table 表名(</span><br><span class="line">	字段名<span class="number">1</span> 字段类型(宽度) 约束条件,</span><br><span class="line">    字段名<span class="number">2</span> 字段类型(宽度) 约束条件,</span><br><span class="line">    字段名<span class="number">3</span> 字段类型(宽度) 约束条件</span><br><span class="line">)</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">1.字段名和字段类型是必须的 宽度和约束条件是可选的</span></span><br><span class="line"><span class="string">2.约束条件可以有多个</span></span><br><span class="line"><span class="string">	字段名1 字段类型(宽度) 约束条件1 约束条件2 约束条件3</span></span><br><span class="line"><span class="string">3.最后一个字段结尾不能加逗号</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<h1 id="7-约束条件"><a href="#7-约束条件" class="headerlink" title="7 约束条件"></a>7 约束条件</h1><p>在字段类型的基础之上添加的额外约束</p>
<h2 id="7-1-分类"><a href="#7-1-分类" class="headerlink" title="7.1 分类"></a>7.1 分类</h2><h3 id="unsigned-、zerofill、not-null、default、unique、primary-key、auto-increment"><a href="#unsigned-、zerofill、not-null、default、unique、primary-key、auto-increment" class="headerlink" title="unsigned 、zerofill、not null、default、unique、primary key、auto_increment"></a>unsigned 、zerofill、not null、default、unique、primary key、auto_increment</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#1.unsgined</span></span><br><span class="line">	无符号(正负号)</span><br><span class="line"><span class="comment">#2.zerofill</span></span><br><span class="line">	填充</span><br><span class="line">	</span><br><span class="line"><span class="comment">#3.not null</span></span><br><span class="line">	非空</span><br><span class="line">    create table t2(</span><br><span class="line">    	<span class="built_in">id</span> <span class="built_in">int</span>,</span><br><span class="line">        name varchar(<span class="number">32</span>) <span class="keyword">not</span> null</span><br><span class="line">    );</span><br><span class="line">    </span><br><span class="line"><span class="comment">#4.default</span></span><br><span class="line">	默认值</span><br><span class="line">    create table t3(</span><br><span class="line">    	<span class="built_in">id</span> <span class="built_in">int</span>,</span><br><span class="line">        name char(<span class="number">32</span>),</span><br><span class="line">        gender enum(<span class="string">&#x27;male&#x27;</span>,<span class="string">&#x27;female&#x27;</span>,<span class="string">&#x27;others&#x27;</span>) default <span class="string">&#x27;male&#x27;</span></span><br><span class="line">    );</span><br><span class="line">    </span><br><span class="line"><span class="comment">#5.unique</span></span><br><span class="line">	唯一</span><br><span class="line">    <span class="comment"># 单列唯一</span></span><br><span class="line">    create table t4(</span><br><span class="line">    	<span class="built_in">id</span> <span class="built_in">int</span>,</span><br><span class="line">        name varchar(<span class="number">32</span>) unique</span><br><span class="line">    );</span><br><span class="line">    <span class="comment"># 多列唯一</span></span><br><span class="line">    create table t5(</span><br><span class="line">    	<span class="built_in">id</span> <span class="built_in">int</span>,</span><br><span class="line">        host varchar(<span class="number">32</span>),</span><br><span class="line">        port <span class="built_in">int</span>,</span><br><span class="line">        unique(host,port)</span><br><span class="line">    );</span><br><span class="line"><span class="comment">#6.primary key</span></span><br><span class="line">主键</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">1.单从限制角度上来看 主键相当于是非空且唯一</span></span><br><span class="line"><span class="string">id int primary key == id int not null unique</span></span><br><span class="line"><span class="string">create table t6(</span></span><br><span class="line"><span class="string">id int primary key</span></span><br><span class="line"><span class="string">);</span></span><br><span class="line"><span class="string">2.InnoDB存储引擎规定了在创建表的时候必须有且只有一个主键</span></span><br><span class="line"><span class="string">1.为什么之前创建表的时候没有主键也可以呢？</span></span><br><span class="line"><span class="string">当表中没有任何的约束条件字段，为了能够顺利的创建出表，InnoDB存储引擎会采用内部隐藏的字段作为主键</span></span><br><span class="line"><span class="string">隐藏意味着我们无法使用到，主键其实可以帮助我们加快数据的查询速度</span></span><br><span class="line"><span class="string">2.没有主键但是有非空且唯一的字段 那么会自动将该字段升级为主键</span></span><br><span class="line"><span class="string">create table t7(</span></span><br><span class="line"><span class="string">id int,</span></span><br><span class="line"><span class="string">age int not null unique,</span></span><br><span class="line"><span class="string">pwd int not null unique</span></span><br><span class="line"><span class="string">);</span></span><br><span class="line"><span class="string">结论:我们在创建表的时候一般都会创建一个id字段(序号\编号)</span></span><br><span class="line"><span class="string">并且我们会将该字段设置为主键</span></span><br><span class="line"><span class="string">id int primary key</span></span><br><span class="line"><span class="string">ps:id名称可以不固定 uid cid pid </span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#7.auto_increment</span></span><br><span class="line">	自增</span><br><span class="line">    <span class="comment"># 单一主键</span></span><br><span class="line">    专门用来给key键使用(你就理解为是专门给主键用的)</span><br><span class="line">    create table t8(</span><br><span class="line">    	<span class="built_in">id</span> <span class="built_in">int</span> primary key auto_increment,</span><br><span class="line">        name varchar(<span class="number">32</span>)</span><br><span class="line">    );</span><br><span class="line">    <span class="comment"># 联合主键</span></span><br><span class="line">    create table t8(</span><br><span class="line">    	<span class="built_in">id</span> <span class="built_in">int</span>,</span><br><span class="line">        nid <span class="built_in">int</span>,</span><br><span class="line">        name varchar(<span class="number">32</span>),</span><br><span class="line">        primary key(<span class="built_in">id</span>,nid)...</span><br><span class="line">    );</span><br><span class="line"><span class="string">&quot;&quot;&quot;以后的主键字段固定写法&quot;&quot;&quot;</span></span><br><span class="line">	<span class="built_in">id</span> <span class="built_in">int</span> primary key auto_increment</span><br></pre></td></tr></table></figure>

<h2 id="7-2-主键的特征"><a href="#7-2-主键的特征" class="headerlink" title="7.2 主键的特征"></a>7.2 主键的特征</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.delete from</span></span><br><span class="line">	不会影响主键的自增</span><br><span class="line"><span class="comment"># 2.truncate</span></span><br><span class="line">	清空表数据并且重置主键</span><br></pre></td></tr></table></figure>
<h2 id="7-3-外键"><a href="#7-3-外键" class="headerlink" title="7.3 外键"></a>7.3 外键</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;&#x27;&#x27;员工表&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="built_in">id</span> emp_name emp_salary dep_name dep_desc</span><br><span class="line"><span class="comment"># 问题</span></span><br><span class="line"><span class="number">1.</span>表结构不够明确(忽略)</span><br><span class="line">	到底是员工表还是部门表</span><br><span class="line"><span class="number">2.</span>浪费存储空间(忽略)</span><br><span class="line">	硬盘不值钱 不够花钱买</span><br><span class="line"><span class="number">3.</span>表扩展性极差(不能忽略)</span><br><span class="line">	</span><br><span class="line"><span class="comment"># 拆分</span></span><br><span class="line">上述三个问题都能够解决 但是员工与部门之间没有了关联</span><br><span class="line"></span><br><span class="line">外键字段</span><br><span class="line">	用来建立表与表之间的关系的字段</span><br></pre></td></tr></table></figure>

<h3 id="7-3-1-表关系"><a href="#7-3-1-表关系" class="headerlink" title="7.3.1 表关系"></a>7.3.1 表关系</h3><p><strong>表关系分类</strong></p>
<ul>
<li>1.一对多</li>
<li>2.多对多</li>
<li>3.一对一</li>
<li>4.没有关系</li>
</ul>
<p><strong>表关系判断方法</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#1.以员工表与部门表为例</span></span><br><span class="line"><span class="number">1.</span>先站在员工表角度</span><br><span class="line">问:一名员工能否对应多个部门</span><br><span class="line">答:不可以</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>再站在部门表角度</span><br><span class="line">问:一个部门能否对应多名员工</span><br><span class="line">答:可以</span><br><span class="line"></span><br><span class="line">结论:两边一个可以一个不可以 那么表关系就是<span class="string">&quot;一对多&quot;</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">针对一对多表关系</span></span><br><span class="line"><span class="string">外键字段建在多的一方(建在员工表中)</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line"><span class="comment">#2.以书籍表与作者表为例</span></span><br><span class="line"><span class="number">1.</span>先站在书籍表角度</span><br><span class="line">问:一本书能否对应多名作者</span><br><span class="line">答:可以</span><br><span class="line"><span class="number">2.</span>再站在作者表角度</span><br><span class="line">问:一名作者能否对应多本书</span><br><span class="line">答:可以</span><br><span class="line">结论:两边都可以 那么表关系就是<span class="string">&quot;多对多&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">针对多对多表关系</span></span><br><span class="line"><span class="string">外键字段并不会建在任何一张关系表</span></span><br><span class="line"><span class="string">而是单独开设一张新表专门存储</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line">	</span><br><span class="line"><span class="comment">#3.以用户表与用户详情表为例</span></span><br><span class="line"><span class="number">1.</span>先站在用户表角度</span><br><span class="line">问:一名用户能否对应多个用户详情</span><br><span class="line">答:不可以</span><br><span class="line"><span class="number">2.</span>再站在用户详情表角度</span><br><span class="line">问:一个用户详情能否对应多名用户</span><br><span class="line">答:不可以</span><br><span class="line">结论:两边都不可以 那么要么没关系 要么<span class="string">&quot;一对一&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">针对一对一表关系</span></span><br><span class="line"><span class="string">外键字段建在任何一方都可以</span></span><br><span class="line"><span class="string">但是推荐你建在查询频率较高的表中</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="7-3-2-SQL语句建立表关系"><a href="#7-3-2-SQL语句建立表关系" class="headerlink" title="7.3.2 SQL语句建立表关系"></a>7.3.2 SQL语句建立表关系</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">############################一对多#########################</span></span><br><span class="line"><span class="comment"># 1.先创建基本字段</span></span><br><span class="line"><span class="comment"># 2.再考虑外键字段</span></span><br><span class="line">create table emp(</span><br><span class="line">	<span class="built_in">id</span> <span class="built_in">int</span> primary key auto_increment,</span><br><span class="line">    emp_name varchar(<span class="number">32</span>),</span><br><span class="line">    emp_salary <span class="built_in">int</span>,</span><br><span class="line">    dep_id <span class="built_in">int</span>,</span><br><span class="line">    foreign key(dep_id) references dep(<span class="built_in">id</span>)</span><br><span class="line">);</span><br><span class="line">create table dep(</span><br><span class="line">	<span class="built_in">id</span> <span class="built_in">int</span> primary key auto_increment,</span><br><span class="line">    dep_name varchar(<span class="number">32</span>),</span><br><span class="line">    dep_desc varchar(<span class="number">64</span>)    </span><br><span class="line">);</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">1.在创建表的是先创建被关联的表(没有外键字段的表)</span></span><br><span class="line"><span class="string">2.在录入数据的时候先录入被关联表的数据</span></span><br><span class="line"><span class="string">3.修改或者删除被关联表数据</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">####################多对多######################</span></span><br><span class="line">create table book(</span><br><span class="line">	<span class="built_in">id</span> <span class="built_in">int</span> primary key auto_increment,</span><br><span class="line">    title varchar(<span class="number">32</span>),</span><br><span class="line">    price <span class="built_in">float</span>(<span class="number">8</span>,<span class="number">2</span>) </span><br><span class="line">);</span><br><span class="line">create table author(</span><br><span class="line">	<span class="built_in">id</span> <span class="built_in">int</span> primary key auto_increment,</span><br><span class="line">    name varchar(<span class="number">32</span>),</span><br><span class="line">    age <span class="built_in">int</span>  </span><br><span class="line">);</span><br><span class="line">create table book2author(</span><br><span class="line">	<span class="built_in">id</span> <span class="built_in">int</span> primary key auto_increment,</span><br><span class="line">    author_id <span class="built_in">int</span>,</span><br><span class="line">    foreign key(author_id) references author(<span class="built_in">id</span>)</span><br><span class="line">    on update cascade</span><br><span class="line">    on delete cascade,</span><br><span class="line">    book_id <span class="built_in">int</span>,</span><br><span class="line">    foreign key(book_id) references book(<span class="built_in">id</span>)</span><br><span class="line">    on update cascade</span><br><span class="line">    on delete cascade</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">######################一对一####################</span></span><br><span class="line">create table userinfo(</span><br><span class="line">	<span class="built_in">id</span> <span class="built_in">int</span> primary key auto_increment,</span><br><span class="line">    name varchar(<span class="number">32</span>),</span><br><span class="line">    age <span class="built_in">int</span>,</span><br><span class="line">    detail_id <span class="built_in">int</span> unique,</span><br><span class="line">    foreign key(detail_id) references userinfo_detail(<span class="built_in">id</span>)</span><br><span class="line">    on update cascade</span><br><span class="line">    on delete cascade</span><br><span class="line">);</span><br><span class="line">create table userinfo_detail(</span><br><span class="line">	<span class="built_in">id</span> <span class="built_in">int</span> primary key auto_increment,</span><br><span class="line">    addr varchar(<span class="number">32</span>),</span><br><span class="line">    phone bigint</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h3 id="7-3-3-级联更新级联删除"><a href="#7-3-3-级联更新级联删除" class="headerlink" title="7.3.3 级联更新级联删除"></a>7.3.3 级联更新级联删除</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">create table dep(</span><br><span class="line">	<span class="built_in">id</span> <span class="built_in">int</span> primary key auto_increment,</span><br><span class="line">    dep_name varchar(<span class="number">32</span>),</span><br><span class="line">    dep_desc varchar(<span class="number">64</span>)    </span><br><span class="line">);</span><br><span class="line">create table emp(</span><br><span class="line">	<span class="built_in">id</span> <span class="built_in">int</span> primary key auto_increment,</span><br><span class="line">    emp_name varchar(<span class="number">32</span>),</span><br><span class="line">    emp_salary <span class="built_in">int</span>,</span><br><span class="line">    dep_id <span class="built_in">int</span>,</span><br><span class="line">    foreign key(dep_id) references dep(<span class="built_in">id</span>) </span><br><span class="line">    on update cascade  <span class="comment"># 级联更新</span></span><br><span class="line">    on delete cascade  <span class="comment"># 级联删除</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h3 id="作业"><a href="#作业" class="headerlink" title="作业"></a>作业</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>书籍表与出版社表</span><br><span class="line"><span class="number">2.</span>课程表与老师表</span><br><span class="line"><span class="number">3.</span>班级表与学生表</span><br><span class="line"><span class="number">4.</span>作者表与作者详情表</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">书写出完整的判断过程</span></span><br><span class="line"><span class="string">并且写上对应的SQL语句</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>
<h1 id="8-查询关键字"><a href="#8-查询关键字" class="headerlink" title="8 查询关键字"></a>8 查询关键字</h1><p>**首先准备一个表</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s</span><br></pre></td></tr></table></figure>
<h2 id="8-1-select-from-where"><a href="#8-1-select-from-where" class="headerlink" title="8.1 select from where"></a>8.1 select from where</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>select</span><br><span class="line">	用来指定表的字段数据</span><br><span class="line">    select * <span class="keyword">from</span> emp;</span><br><span class="line">    select <span class="built_in">id</span>,name <span class="keyword">from</span> emp;</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    在工作中一般很少使用*号 我们只是为了教学方便</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"> </span><br><span class="line"><span class="number">2.</span><span class="keyword">from</span></span><br><span class="line">	后面跟需要查询的表名即可</span><br><span class="line">    </span><br><span class="line"><span class="number">3.</span>where</span><br><span class="line">	筛选数据</span><br></pre></td></tr></table></figure>
<h2 id="8-2-查询关键字之where"><a href="#8-2-查询关键字之where" class="headerlink" title="8.2 查询关键字之where"></a>8.2 查询关键字之where</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.查询id大于等于3小于等于6的数据</span></span><br><span class="line">select <span class="built_in">id</span>,name <span class="keyword">from</span> emp where <span class="built_in">id</span> &gt;= <span class="number">3</span> <span class="keyword">and</span> <span class="built_in">id</span> &lt;= <span class="number">6</span>;</span><br><span class="line">select *  <span class="keyword">from</span> emp where <span class="built_in">id</span> between <span class="number">3</span> <span class="keyword">and</span> <span class="number">6</span>;  </span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.查询薪资是20000或者18000或者17000的数据</span></span><br><span class="line">select * <span class="keyword">from</span> emp where salary = <span class="number">20000</span> <span class="keyword">or</span> salary = <span class="number">18000</span> <span class="keyword">or</span> salary = <span class="number">17000</span>;</span><br><span class="line">select * <span class="keyword">from</span> emp where salary <span class="keyword">in</span> (<span class="number">20000</span>,<span class="number">18000</span>,<span class="number">17000</span>);  <span class="comment"># 简写</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">模糊查询</span></span><br><span class="line"><span class="string">	关键字  </span></span><br><span class="line"><span class="string">		like</span></span><br><span class="line"><span class="string">	关键符号</span></span><br><span class="line"><span class="string">		%:匹配任意个数的任意字符</span></span><br><span class="line"><span class="string">		_:匹配单个个数的任意字符</span></span><br><span class="line"><span class="string">	show variables like &#x27;%mode%&#x27;;</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="comment"># 3.查询姓名中带有字母o的员工姓名和薪资</span></span><br><span class="line">select name,salary <span class="keyword">from</span> emp where name like <span class="string">&#x27;%o%&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4.查询姓名由四个字符组成的员工姓名和薪资</span></span><br><span class="line">select name,salary <span class="keyword">from</span> emp where name like <span class="string">&#x27;____&#x27;</span>;</span><br><span class="line">select name,salary <span class="keyword">from</span> emp where char_length(name) =<span class="number">4</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 5.查询id小于3或者大于6的数据</span></span><br><span class="line">select *  <span class="keyword">from</span> emp where <span class="built_in">id</span> <span class="keyword">not</span> between <span class="number">3</span> <span class="keyword">and</span> <span class="number">6</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 6.查询薪资不在20000，18000，17000范围的数据</span></span><br><span class="line">select * <span class="keyword">from</span> emp where salary <span class="keyword">not</span> <span class="keyword">in</span> (<span class="number">20000</span>,<span class="number">18000</span>,<span class="number">17000</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment"># 7.查询岗位描述为空的员工名与岗位名  针对null不能用等号，只能用is</span></span><br><span class="line">select name,post <span class="keyword">from</span> emp where post_comment = NULL;  <span class="comment"># 查询为空！</span></span><br><span class="line">select name,post <span class="keyword">from</span> emp where post_comment <span class="keyword">is</span> NULL;</span><br><span class="line">select name,post <span class="keyword">from</span> emp where post_comment <span class="keyword">is</span> <span class="keyword">not</span> NULL;</span><br></pre></td></tr></table></figure>

<h2 id="8-3-查询关键字之group-by分组"><a href="#8-3-查询关键字之group-by分组" class="headerlink" title="8.3 查询关键字之group by分组"></a>8.3 查询关键字之group by分组</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">分组</span><br><span class="line">	将单个单个的个体按照指定的条件分成一个个整体</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">分组之后默认只能直接获取到分组的依据</span></span><br><span class="line"><span class="string">其他字段无法再直接获取(可以间接获取)</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="comment"># 严格模式</span></span><br><span class="line"><span class="built_in">set</span> <span class="keyword">global</span> sql_mode=<span class="string">&#x27;STRICT_TRANS_TABLES,PAD_CHAR_TO_FULL_LENGTH,only_full_group_by&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 1.每个部门的最高薪资</span></span><br><span class="line">select post,<span class="built_in">max</span>(salary) <span class="keyword">from</span> emp group by post;</span><br><span class="line"><span class="comment"># 2.每个部门的最低薪资</span></span><br><span class="line">select post,<span class="built_in">min</span>(salary) <span class="keyword">from</span> emp group by post;</span><br><span class="line"><span class="comment"># 3.每个部门的平均薪资</span></span><br><span class="line">select post,avg(salary) <span class="keyword">from</span> emp group by post;</span><br><span class="line"><span class="comment"># 4.每个部门的人数</span></span><br><span class="line">select post,count(<span class="built_in">id</span>) <span class="keyword">from</span> emp group by post;</span><br><span class="line"><span class="comment"># 5.每个部门的月工资总和</span></span><br><span class="line">select post,<span class="built_in">sum</span>(salary) <span class="keyword">from</span> emp group by post;</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">可以给字段起别名(as还可以给表起别名)</span></span><br><span class="line"><span class="string">select post as &#x27;部门&#x27;,sum(salary) as &#x27;总和&#x27; from emp group by post;</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="comment"># 查询分组之后的部门名称和每个部门下所有的员工姓名</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">group_concat()  获取分组以外的字段数据 并且支持拼接操作</span></span><br><span class="line"><span class="string">select post,group_concat(name) from emp group by post;</span></span><br><span class="line"><span class="string">select post,group_concat(name,&#x27;:&#x27;,salary) from emp group by post;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">concat()  未分组之前使用的拼接功能</span></span><br><span class="line"><span class="string">select concat(name,&#x27;:&#x27;,sex) from emp;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">concat_ws()</span></span><br><span class="line"><span class="string">select concat_ws(&#x27;:&#x27;,name,sex,salary,age) from emp;</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="8-4-聚合函数"><a href="#8-4-聚合函数" class="headerlink" title="8.4 聚合函数"></a>8.4 聚合函数</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">分组之后频繁需要使用的</span><br><span class="line">	<span class="built_in">max</span>		最大值</span><br><span class="line">    <span class="built_in">min</span>		最小值</span><br><span class="line">    <span class="built_in">sum</span>		求和</span><br><span class="line">    count	计数</span><br><span class="line">    avg		平均值</span><br></pre></td></tr></table></figure>
<h2 id="作业-1"><a href="#作业-1" class="headerlink" title="作业"></a>作业</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> 查询岗位名以及岗位包含的所有员工名字</span><br><span class="line"><span class="number">2.</span> 查询岗位名以及各岗位内包含的员工个数</span><br><span class="line"><span class="number">3.</span> 查询公司内男员工和女员工的个数</span><br><span class="line"><span class="number">4.</span> 查询岗位名以及各岗位的平均薪资</span><br><span class="line"><span class="number">5.</span> 查询岗位名以及各岗位的最高薪资</span><br><span class="line"><span class="number">6.</span> 查询岗位名以及各岗位的最低薪资</span><br><span class="line"><span class="number">7.</span> 查询男员工与男员工的平均薪资，女员工与女员工的平均薪资</span><br></pre></td></tr></table></figure>
<h2 id="8-5-查询关键字之having过滤"><a href="#8-5-查询关键字之having过滤" class="headerlink" title="8.5 查询关键字之having过滤"></a>8.5 查询关键字之having过滤</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">功能上having与where是一模一样的</span><br><span class="line">但是使用位置上有所不同</span><br><span class="line">	where在分组之前使用</span><br><span class="line">    having在分组之后使用</span><br><span class="line"> </span><br><span class="line"><span class="number">1.</span>统计各部门年龄在<span class="number">30</span>岁以上的员工平均工资，并且保留平均工资大于<span class="number">10000</span>的部门</span><br><span class="line"><span class="comment"># 1.先筛选出所有30岁以上的员工</span></span><br><span class="line">	select * <span class="keyword">from</span> emp where age&gt;<span class="number">30</span>;</span><br><span class="line"><span class="comment"># 2.然后再按照部门分组</span></span><br><span class="line">	<span class="string">&#x27;&#x27;&#x27;SQL语句的查询结构我们也可以直接看成是一张表&#x27;&#x27;&#x27;</span></span><br><span class="line">	select post,avg(salary) <span class="keyword">from</span> emp where age&gt;<span class="number">30</span> group by post;</span><br><span class="line"><span class="comment"># 3.分组之后做过滤操作</span></span><br><span class="line">	select post,avg(salary) <span class="keyword">from</span> emp </span><br><span class="line">    	where age&gt;<span class="number">30</span> </span><br><span class="line">        group by post </span><br><span class="line">        having avg(salary)&gt;<span class="number">10000</span></span><br><span class="line">        ;</span><br></pre></td></tr></table></figure>

<h2 id="8-6-查询关键字之distinct去重"><a href="#8-6-查询关键字之distinct去重" class="headerlink" title="8.6 查询关键字之distinct去重"></a>8.6 查询关键字之distinct去重</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">去重有一个非常严格的前提条件 数据必须是完全一样</span><br><span class="line">	如果数据带有主键那么肯定无法去重</span><br><span class="line">select distinct age <span class="keyword">from</span> emp;</span><br></pre></td></tr></table></figure>

<h2 id="8-7-查询关键字之order-by排序"><a href="#8-7-查询关键字之order-by排序" class="headerlink" title="8.7 查询关键字之order by排序"></a>8.7 查询关键字之order by排序</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">select * <span class="keyword">from</span> emp order by salary;  <span class="comment"># 默认是升序</span></span><br><span class="line">select * <span class="keyword">from</span> emp order by salary asc;  <span class="comment"># 升序关键字 可以不写</span></span><br><span class="line">select * <span class="keyword">from</span> emp order by salary desc;  <span class="comment"># 降序</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 排序也可以指定多个字段</span></span><br><span class="line">select * <span class="keyword">from</span> emp order by age desc,salary asc;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 统计各部门年龄在10岁以上的员工平均工资，并且保留平均工资大于1000的部门，然后对平均工资进行排序</span></span><br><span class="line">	select post,avg(salary) <span class="keyword">from</span> emp </span><br><span class="line">    	where age&gt;<span class="number">10</span></span><br><span class="line">        group by post</span><br><span class="line">        having avg(salary)&gt;<span class="number">1000</span></span><br><span class="line">        order by avg(salary);</span><br></pre></td></tr></table></figure>

<h2 id="8-8-查询关键字之limit分页"><a href="#8-8-查询关键字之limit分页" class="headerlink" title="8.8 查询关键字之limit分页"></a>8.8 查询关键字之limit分页</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">用来限制数据的展示条数</span><br><span class="line">select * <span class="keyword">from</span> emp limit <span class="number">5</span>;  <span class="comment"># 前五条</span></span><br><span class="line">select * <span class="keyword">from</span> emp limit <span class="number">5</span>,<span class="number">5</span>;  <span class="comment"># 起始位置、条数</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查询工资最高的人的详细信息</span></span><br><span class="line">	<span class="comment"># 先按照工资排序 然后限制展示条数</span></span><br><span class="line">select * <span class="keyword">from</span> emp order by salary desc limit <span class="number">1</span>;</span><br></pre></td></tr></table></figure>

<h3 id="8-9-查询关键字之regexp正则"><a href="#8-9-查询关键字之regexp正则" class="headerlink" title="8.9 查询关键字之regexp正则"></a>8.9 查询关键字之regexp正则</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">正则表达式</span><br><span class="line">	用一些特殊符号的组合去字符串中筛选出符合条件的数据</span><br><span class="line">   	</span><br><span class="line">select * <span class="keyword">from</span> emp where name regexp <span class="string">&#x27;^j.*(n|y)$&#x27;</span>;</span><br><span class="line"><span class="comment"># &#x27;^j.*(n|y)$&#x27;  j开头 中间无所谓 n或者y结尾</span></span><br></pre></td></tr></table></figure>
<h1 id="9-多表查询"><a href="#9-多表查询" class="headerlink" title="9 多表查询"></a>9 多表查询</h1><h2 id="9-1-多表查询思想"><a href="#9-1-多表查询思想" class="headerlink" title="9.1 多表查询思想"></a>9.1 多表查询思想</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>子查询</span><br><span class="line">	分步解决问题</span><br><span class="line">    将一条SQL语句的查询结果用括号括起来当作另外一条SQL语句的查询条件</span><br><span class="line"> </span><br><span class="line"><span class="number">2.</span>连表操作</span><br><span class="line">	先将所有需要用到的表拼接到一起(一张表)</span><br><span class="line">    然后就是转换成单表查询</span><br></pre></td></tr></table></figure>
<h2 id="9-2-前期表准备"><a href="#9-2-前期表准备" class="headerlink" title="9.2 前期表准备"></a>9.2 前期表准备</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#建表</span></span><br><span class="line">create table dep(</span><br><span class="line"><span class="built_in">id</span> <span class="built_in">int</span> primary key auto_increment,</span><br><span class="line">name varchar(<span class="number">20</span>) </span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">create table emp(</span><br><span class="line"><span class="built_in">id</span> <span class="built_in">int</span> primary key auto_increment,</span><br><span class="line">name varchar(<span class="number">20</span>),</span><br><span class="line">sex enum(<span class="string">&#x27;male&#x27;</span>,<span class="string">&#x27;female&#x27;</span>) <span class="keyword">not</span> null default <span class="string">&#x27;male&#x27;</span>,</span><br><span class="line">age <span class="built_in">int</span>,</span><br><span class="line">dep_id <span class="built_in">int</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">#插入数据</span></span><br><span class="line">insert into dep values</span><br><span class="line">(<span class="number">200</span>,<span class="string">&#x27;技术&#x27;</span>),</span><br><span class="line">(<span class="number">201</span>,<span class="string">&#x27;人力资源&#x27;</span>),</span><br><span class="line">(<span class="number">202</span>,<span class="string">&#x27;销售&#x27;</span>),</span><br><span class="line">(<span class="number">203</span>,<span class="string">&#x27;运营&#x27;</span>);</span><br><span class="line"></span><br><span class="line">insert into emp(name,sex,age,dep_id) values</span><br><span class="line">(<span class="string">&#x27;jason&#x27;</span>,<span class="string">&#x27;male&#x27;</span>,<span class="number">18</span>,<span class="number">200</span>),</span><br><span class="line">(<span class="string">&#x27;egon&#x27;</span>,<span class="string">&#x27;female&#x27;</span>,<span class="number">48</span>,<span class="number">201</span>),</span><br><span class="line">(<span class="string">&#x27;kevin&#x27;</span>,<span class="string">&#x27;male&#x27;</span>,<span class="number">18</span>,<span class="number">201</span>),</span><br><span class="line">(<span class="string">&#x27;nick&#x27;</span>,<span class="string">&#x27;male&#x27;</span>,<span class="number">28</span>,<span class="number">202</span>),</span><br><span class="line">(<span class="string">&#x27;owen&#x27;</span>,<span class="string">&#x27;male&#x27;</span>,<span class="number">18</span>,<span class="number">203</span>),</span><br><span class="line">(<span class="string">&#x27;jerry&#x27;</span>,<span class="string">&#x27;female&#x27;</span>,<span class="number">18</span>,<span class="number">204</span>);</span><br></pre></td></tr></table></figure>

<h2 id="9-3-子查询"><a href="#9-3-子查询" class="headerlink" title="9.3 子查询"></a>9.3 子查询</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查询jason所在的部门名称</span></span><br><span class="line">	<span class="comment"># 第一步 先获取jason所在的部门id</span></span><br><span class="line">    select dep_id <span class="keyword">from</span> emp where name=<span class="string">&#x27;jason&#x27;</span>;</span><br><span class="line">   	<span class="comment"># 第二步 根据id号去部门表中筛选</span></span><br><span class="line">    select * <span class="keyword">from</span> dep where <span class="built_in">id</span> = <span class="number">200</span>;</span><br><span class="line">    <span class="comment"># 完整句式</span></span><br><span class="line">    select * <span class="keyword">from</span> dep where <span class="built_in">id</span>=(select dep_id <span class="keyword">from</span> emp where name=<span class="string">&#x27;jason&#x27;</span>);</span><br></pre></td></tr></table></figure>

<h2 id="9-4-连表操作"><a href="#9-4-连表操作" class="headerlink" title="9.4 连表操作"></a>9.4 连表操作</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 前戏(了解)</span></span><br><span class="line">select * <span class="keyword">from</span> emp,dep;</span><br><span class="line"><span class="comment"># 基于上表筛选数据(了解)</span></span><br><span class="line">	<span class="string">&#x27;&#x27;&#x27;为了避免字段冲突 可以在字段名前面加表名明确&#x27;&#x27;&#x27;</span></span><br><span class="line">select * <span class="keyword">from</span> emp,dep where emp.dep_id=dep.<span class="built_in">id</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">########################掌握############################</span></span><br><span class="line">inner join	内连接	拼接公共的部分</span><br><span class="line">	select * <span class="keyword">from</span> emp inner join dep on emp.dep_id=dep.<span class="built_in">id</span>;</span><br><span class="line">left join	左连接 以左表为基准展示所有数据 没有的null填充</span><br><span class="line">	select * <span class="keyword">from</span> emp left join dep on emp.dep_id=dep.<span class="built_in">id</span>;</span><br><span class="line">right join	右连接 以右表为基准展示所有数据 没有的null填充</span><br><span class="line">	select * <span class="keyword">from</span> emp right join dep on emp.dep_id=dep.<span class="built_in">id</span>;</span><br><span class="line">union	全连接</span><br><span class="line">	select * <span class="keyword">from</span> emp left join dep on emp.dep_id=dep.<span class="built_in">id</span></span><br><span class="line">    union</span><br><span class="line">    select * <span class="keyword">from</span> emp right join dep on emp.dep_id=dep.<span class="built_in">id</span>;</span><br></pre></td></tr></table></figure>

<h2 id="9-5-Navicat可视化软件"><a href="#9-5-Navicat可视化软件" class="headerlink" title="9.5 Navicat可视化软件"></a>9.5 Navicat可视化软件</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">可以充当很多数据库软件的客户端 封装了很多快捷方法</span><br><span class="line"></span><br><span class="line">该软件默认也是收费的 需要破解</span><br><span class="line">正版不破解免费试用<span class="number">14</span>天</span><br><span class="line">破解版(老版本):https://pan.baidu.com/s/1bpo5mqj</span><br><span class="line"></span><br><span class="line"><span class="number">1.</span>下载与安装</span><br><span class="line"><span class="number">2.</span>使用方法</span><br><span class="line">	创建库 表 记录</span><br><span class="line">    	注意主键</span><br><span class="line">     外键字段</span><br><span class="line">    逆向数据库到模型</span><br><span class="line">    转储SQL文件</span><br><span class="line">  	查询</span><br></pre></td></tr></table></figure>

<h2 id="9-6-多表查询SQL文件"><a href="#9-6-多表查询SQL文件" class="headerlink" title="9.6 多表查询SQL文件"></a>9.6 多表查询SQL文件</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line"> 数据导入：</span><br><span class="line"> Navicat Premium Data Transfer</span><br><span class="line"></span><br><span class="line"> Source Server         : localhost</span><br><span class="line"> Source Server <span class="type">Type</span>    : MySQL</span><br><span class="line"> Source Server Version : <span class="number">50624</span></span><br><span class="line"> Source Host           : localhost</span><br><span class="line"> Source Database       : sqlexam</span><br><span class="line"></span><br><span class="line"> Target Server <span class="type">Type</span>    : MySQL</span><br><span class="line"> Target Server Version : <span class="number">50624</span></span><br><span class="line"> File Encoding         : utf-<span class="number">8</span></span><br><span class="line"></span><br><span class="line"> Date: <span class="number">10</span>/<span class="number">21</span>/<span class="number">2016</span> 06:<span class="number">46</span>:<span class="number">46</span> AM</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">SET NAMES utf8;</span><br><span class="line">SET FOREIGN_KEY_CHECKS = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">-- ----------------------------</span><br><span class="line">--  Table structure <span class="keyword">for</span> `<span class="keyword">class</span>`</span><br><span class="line">-- ----------------------------</span><br><span class="line">DROP TABLE IF EXISTS `<span class="keyword">class</span>`;</span><br><span class="line">CREATE TABLE `<span class="keyword">class</span>` (</span><br><span class="line">  `cid` <span class="built_in">int</span>(<span class="number">11</span>) NOT NULL AUTO_INCREMENT,</span><br><span class="line">  `caption` varchar(<span class="number">32</span>) NOT NULL,</span><br><span class="line">  PRIMARY KEY (`cid`)</span><br><span class="line">) ENGINE=InnoDB AUTO_INCREMENT=<span class="number">5</span> DEFAULT CHARSET=utf8;</span><br><span class="line"></span><br><span class="line">-- ----------------------------</span><br><span class="line">--  Records of `<span class="keyword">class</span>`</span><br><span class="line">-- ----------------------------</span><br><span class="line">BEGIN;</span><br><span class="line">INSERT INTO `<span class="keyword">class</span>` VALUES (<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;三年二班&#x27;</span>), (<span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;三年三班&#x27;</span>), (<span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;一年二班&#x27;</span>), (<span class="string">&#x27;4&#x27;</span>, <span class="string">&#x27;二年九班&#x27;</span>);</span><br><span class="line">COMMIT;</span><br><span class="line"></span><br><span class="line">-- ----------------------------</span><br><span class="line">--  Table structure <span class="keyword">for</span> `course`</span><br><span class="line">-- ----------------------------</span><br><span class="line">DROP TABLE IF EXISTS `course`;</span><br><span class="line">CREATE TABLE `course` (</span><br><span class="line">  `cid` <span class="built_in">int</span>(<span class="number">11</span>) NOT NULL AUTO_INCREMENT,</span><br><span class="line">  `cname` varchar(<span class="number">32</span>) NOT NULL,</span><br><span class="line">  `teacher_id` <span class="built_in">int</span>(<span class="number">11</span>) NOT NULL,</span><br><span class="line">  PRIMARY KEY (`cid`),</span><br><span class="line">  KEY `fk_course_teacher` (`teacher_id`),</span><br><span class="line">  CONSTRAINT `fk_course_teacher` FOREIGN KEY (`teacher_id`) REFERENCES `teacher` (`tid`)</span><br><span class="line">) ENGINE=InnoDB AUTO_INCREMENT=<span class="number">5</span> DEFAULT CHARSET=utf8;</span><br><span class="line"></span><br><span class="line">-- ----------------------------</span><br><span class="line">--  Records of `course`</span><br><span class="line">-- ----------------------------</span><br><span class="line">BEGIN;</span><br><span class="line">INSERT INTO `course` VALUES (<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;生物&#x27;</span>, <span class="string">&#x27;1&#x27;</span>), (<span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;物理&#x27;</span>, <span class="string">&#x27;2&#x27;</span>), (<span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;体育&#x27;</span>, <span class="string">&#x27;3&#x27;</span>), (<span class="string">&#x27;4&#x27;</span>, <span class="string">&#x27;美术&#x27;</span>, <span class="string">&#x27;2&#x27;</span>);</span><br><span class="line">COMMIT;</span><br><span class="line"></span><br><span class="line">-- ----------------------------</span><br><span class="line">--  Table structure <span class="keyword">for</span> `score`</span><br><span class="line">-- ----------------------------</span><br><span class="line">DROP TABLE IF EXISTS `score`;</span><br><span class="line">CREATE TABLE `score` (</span><br><span class="line">  `sid` <span class="built_in">int</span>(<span class="number">11</span>) NOT NULL AUTO_INCREMENT,</span><br><span class="line">  `student_id` <span class="built_in">int</span>(<span class="number">11</span>) NOT NULL,</span><br><span class="line">  `course_id` <span class="built_in">int</span>(<span class="number">11</span>) NOT NULL,</span><br><span class="line">  `num` <span class="built_in">int</span>(<span class="number">11</span>) NOT NULL,</span><br><span class="line">  PRIMARY KEY (`sid`),</span><br><span class="line">  KEY `fk_score_student` (`student_id`),</span><br><span class="line">  KEY `fk_score_course` (`course_id`),</span><br><span class="line">  CONSTRAINT `fk_score_course` FOREIGN KEY (`course_id`) REFERENCES `course` (`cid`),</span><br><span class="line">  CONSTRAINT `fk_score_student` FOREIGN KEY (`student_id`) REFERENCES `student` (`sid`)</span><br><span class="line">) ENGINE=InnoDB AUTO_INCREMENT=<span class="number">53</span> DEFAULT CHARSET=utf8;</span><br><span class="line"></span><br><span class="line">-- ----------------------------</span><br><span class="line">--  Records of `score`</span><br><span class="line">-- ----------------------------</span><br><span class="line">BEGIN;</span><br><span class="line">INSERT INTO `score` VALUES (<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;10&#x27;</span>), (<span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;9&#x27;</span>), (<span class="string">&#x27;5&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;4&#x27;</span>, <span class="string">&#x27;66&#x27;</span>), (<span class="string">&#x27;6&#x27;</span>, <span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;8&#x27;</span>), (<span class="string">&#x27;8&#x27;</span>, <span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;68&#x27;</span>), (<span class="string">&#x27;9&#x27;</span>, <span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;4&#x27;</span>, <span class="string">&#x27;99&#x27;</span>), (<span class="string">&#x27;10&#x27;</span>, <span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;77&#x27;</span>), (<span class="string">&#x27;11&#x27;</span>, <span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;66&#x27;</span>), (<span class="string">&#x27;12&#x27;</span>, <span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;87&#x27;</span>), (<span class="string">&#x27;13&#x27;</span>, <span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;4&#x27;</span>, <span class="string">&#x27;99&#x27;</span>), (<span class="string">&#x27;14&#x27;</span>, <span class="string">&#x27;4&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;79&#x27;</span>), (<span class="string">&#x27;15&#x27;</span>, <span class="string">&#x27;4&#x27;</span>, <span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;11&#x27;</span>), (<span class="string">&#x27;16&#x27;</span>, <span class="string">&#x27;4&#x27;</span>, <span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;67&#x27;</span>), (<span class="string">&#x27;17&#x27;</span>, <span class="string">&#x27;4&#x27;</span>, <span class="string">&#x27;4&#x27;</span>, <span class="string">&#x27;100&#x27;</span>), (<span class="string">&#x27;18&#x27;</span>, <span class="string">&#x27;5&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;79&#x27;</span>), (<span class="string">&#x27;19&#x27;</span>, <span class="string">&#x27;5&#x27;</span>, <span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;11&#x27;</span>), (<span class="string">&#x27;20&#x27;</span>, <span class="string">&#x27;5&#x27;</span>, <span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;67&#x27;</span>), (<span class="string">&#x27;21&#x27;</span>, <span class="string">&#x27;5&#x27;</span>, <span class="string">&#x27;4&#x27;</span>, <span class="string">&#x27;100&#x27;</span>), (<span class="string">&#x27;22&#x27;</span>, <span class="string">&#x27;6&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;9&#x27;</span>), (<span class="string">&#x27;23&#x27;</span>, <span class="string">&#x27;6&#x27;</span>, <span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;100&#x27;</span>), (<span class="string">&#x27;24&#x27;</span>, <span class="string">&#x27;6&#x27;</span>, <span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;67&#x27;</span>), (<span class="string">&#x27;25&#x27;</span>, <span class="string">&#x27;6&#x27;</span>, <span class="string">&#x27;4&#x27;</span>, <span class="string">&#x27;100&#x27;</span>), (<span class="string">&#x27;26&#x27;</span>, <span class="string">&#x27;7&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;9&#x27;</span>), (<span class="string">&#x27;27&#x27;</span>, <span class="string">&#x27;7&#x27;</span>, <span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;100&#x27;</span>), (<span class="string">&#x27;28&#x27;</span>, <span class="string">&#x27;7&#x27;</span>, <span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;67&#x27;</span>), (<span class="string">&#x27;29&#x27;</span>, <span class="string">&#x27;7&#x27;</span>, <span class="string">&#x27;4&#x27;</span>, <span class="string">&#x27;88&#x27;</span>), (<span class="string">&#x27;30&#x27;</span>, <span class="string">&#x27;8&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;9&#x27;</span>), (<span class="string">&#x27;31&#x27;</span>, <span class="string">&#x27;8&#x27;</span>, <span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;100&#x27;</span>), (<span class="string">&#x27;32&#x27;</span>, <span class="string">&#x27;8&#x27;</span>, <span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;67&#x27;</span>), (<span class="string">&#x27;33&#x27;</span>, <span class="string">&#x27;8&#x27;</span>, <span class="string">&#x27;4&#x27;</span>, <span class="string">&#x27;88&#x27;</span>), (<span class="string">&#x27;34&#x27;</span>, <span class="string">&#x27;9&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;91&#x27;</span>), (<span class="string">&#x27;35&#x27;</span>, <span class="string">&#x27;9&#x27;</span>, <span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;88&#x27;</span>), (<span class="string">&#x27;36&#x27;</span>, <span class="string">&#x27;9&#x27;</span>, <span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;67&#x27;</span>), (<span class="string">&#x27;37&#x27;</span>, <span class="string">&#x27;9&#x27;</span>, <span class="string">&#x27;4&#x27;</span>, <span class="string">&#x27;22&#x27;</span>), (<span class="string">&#x27;38&#x27;</span>, <span class="string">&#x27;10&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;90&#x27;</span>), (<span class="string">&#x27;39&#x27;</span>, <span class="string">&#x27;10&#x27;</span>, <span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;77&#x27;</span>), (<span class="string">&#x27;40&#x27;</span>, <span class="string">&#x27;10&#x27;</span>, <span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;43&#x27;</span>), (<span class="string">&#x27;41&#x27;</span>, <span class="string">&#x27;10&#x27;</span>, <span class="string">&#x27;4&#x27;</span>, <span class="string">&#x27;87&#x27;</span>), (<span class="string">&#x27;42&#x27;</span>, <span class="string">&#x27;11&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;90&#x27;</span>), (<span class="string">&#x27;43&#x27;</span>, <span class="string">&#x27;11&#x27;</span>, <span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;77&#x27;</span>), (<span class="string">&#x27;44&#x27;</span>, <span class="string">&#x27;11&#x27;</span>, <span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;43&#x27;</span>), (<span class="string">&#x27;45&#x27;</span>, <span class="string">&#x27;11&#x27;</span>, <span class="string">&#x27;4&#x27;</span>, <span class="string">&#x27;87&#x27;</span>), (<span class="string">&#x27;46&#x27;</span>, <span class="string">&#x27;12&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;90&#x27;</span>), (<span class="string">&#x27;47&#x27;</span>, <span class="string">&#x27;12&#x27;</span>, <span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;77&#x27;</span>), (<span class="string">&#x27;48&#x27;</span>, <span class="string">&#x27;12&#x27;</span>, <span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;43&#x27;</span>), (<span class="string">&#x27;49&#x27;</span>, <span class="string">&#x27;12&#x27;</span>, <span class="string">&#x27;4&#x27;</span>, <span class="string">&#x27;87&#x27;</span>), (<span class="string">&#x27;52&#x27;</span>, <span class="string">&#x27;13&#x27;</span>, <span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;87&#x27;</span>);</span><br><span class="line">COMMIT;</span><br><span class="line"></span><br><span class="line">-- ----------------------------</span><br><span class="line">--  Table structure <span class="keyword">for</span> `student`</span><br><span class="line">-- ----------------------------</span><br><span class="line">DROP TABLE IF EXISTS `student`;</span><br><span class="line">CREATE TABLE `student` (</span><br><span class="line">  `sid` <span class="built_in">int</span>(<span class="number">11</span>) NOT NULL AUTO_INCREMENT,</span><br><span class="line">  `gender` char(<span class="number">1</span>) NOT NULL,</span><br><span class="line">  `class_id` <span class="built_in">int</span>(<span class="number">11</span>) NOT NULL,</span><br><span class="line">  `sname` varchar(<span class="number">32</span>) NOT NULL,</span><br><span class="line">  PRIMARY KEY (`sid`),</span><br><span class="line">  KEY `fk_class` (`class_id`),</span><br><span class="line">  CONSTRAINT `fk_class` FOREIGN KEY (`class_id`) REFERENCES `<span class="keyword">class</span>` (`cid`)</span><br><span class="line">) ENGINE=InnoDB AUTO_INCREMENT=<span class="number">17</span> DEFAULT CHARSET=utf8;</span><br><span class="line"></span><br><span class="line">-- ----------------------------</span><br><span class="line">--  Records of `student`</span><br><span class="line">-- ----------------------------</span><br><span class="line">BEGIN;</span><br><span class="line">INSERT INTO `student` VALUES (<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;男&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;理解&#x27;</span>), (<span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;女&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;钢蛋&#x27;</span>), (<span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;男&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;张三&#x27;</span>), (<span class="string">&#x27;4&#x27;</span>, <span class="string">&#x27;男&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;张一&#x27;</span>), (<span class="string">&#x27;5&#x27;</span>, <span class="string">&#x27;女&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;张二&#x27;</span>), (<span class="string">&#x27;6&#x27;</span>, <span class="string">&#x27;男&#x27;</span>, <span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;张四&#x27;</span>), (<span class="string">&#x27;7&#x27;</span>, <span class="string">&#x27;女&#x27;</span>, <span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;铁锤&#x27;</span>), (<span class="string">&#x27;8&#x27;</span>, <span class="string">&#x27;男&#x27;</span>, <span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;李三&#x27;</span>), (<span class="string">&#x27;9&#x27;</span>, <span class="string">&#x27;男&#x27;</span>, <span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;李一&#x27;</span>), (<span class="string">&#x27;10&#x27;</span>, <span class="string">&#x27;女&#x27;</span>, <span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;李二&#x27;</span>), (<span class="string">&#x27;11&#x27;</span>, <span class="string">&#x27;男&#x27;</span>, <span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;李四&#x27;</span>), (<span class="string">&#x27;12&#x27;</span>, <span class="string">&#x27;女&#x27;</span>, <span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;如花&#x27;</span>), (<span class="string">&#x27;13&#x27;</span>, <span class="string">&#x27;男&#x27;</span>, <span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;刘三&#x27;</span>), (<span class="string">&#x27;14&#x27;</span>, <span class="string">&#x27;男&#x27;</span>, <span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;刘一&#x27;</span>), (<span class="string">&#x27;15&#x27;</span>, <span class="string">&#x27;女&#x27;</span>, <span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;刘二&#x27;</span>), (<span class="string">&#x27;16&#x27;</span>, <span class="string">&#x27;男&#x27;</span>, <span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;刘四&#x27;</span>);</span><br><span class="line">COMMIT;</span><br><span class="line"></span><br><span class="line">-- ----------------------------</span><br><span class="line">--  Table structure <span class="keyword">for</span> `teacher`</span><br><span class="line">-- ----------------------------</span><br><span class="line">DROP TABLE IF EXISTS `teacher`;</span><br><span class="line">CREATE TABLE `teacher` (</span><br><span class="line">  `tid` <span class="built_in">int</span>(<span class="number">11</span>) NOT NULL AUTO_INCREMENT,</span><br><span class="line">  `tname` varchar(<span class="number">32</span>) NOT NULL,</span><br><span class="line">  PRIMARY KEY (`tid`)</span><br><span class="line">) ENGINE=InnoDB AUTO_INCREMENT=<span class="number">6</span> DEFAULT CHARSET=utf8;</span><br><span class="line"></span><br><span class="line">-- ----------------------------</span><br><span class="line">--  Records of `teacher`</span><br><span class="line">-- ----------------------------</span><br><span class="line">BEGIN;</span><br><span class="line">INSERT INTO `teacher` VALUES (<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;张磊老师&#x27;</span>), (<span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;李平老师&#x27;</span>), (<span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;刘海燕老师&#x27;</span>), (<span class="string">&#x27;4&#x27;</span>, <span class="string">&#x27;朱云海老师&#x27;</span>), (<span class="string">&#x27;5&#x27;</span>, <span class="string">&#x27;李杰老师&#x27;</span>);</span><br><span class="line">COMMIT;</span><br><span class="line"></span><br><span class="line">SET FOREIGN_KEY_CHECKS = <span class="number">1</span>;</span><br></pre></td></tr></table></figure>

<h2 id="9-7-多表查询题"><a href="#9-7-多表查询题" class="headerlink" title="9.7 多表查询题"></a>9.7 多表查询题</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>、 查询所有的课程的名称以及对应的任课老师姓名</span><br><span class="line"><span class="number">4</span>、 查询平均成绩大于八十分的同学的姓名和平均成绩</span><br><span class="line"><span class="number">7</span>、 查询没有报李平老师课的学生姓名</span><br><span class="line"><span class="number">8</span>、 查询没有同时选修物理课程和体育课程的学生姓名</span><br><span class="line"><span class="number">9</span>、 查询挂科超过两门(包括两门)的学生姓名和班级</span><br><span class="line"></span><br><span class="line"><span class="comment">#####################关键字习惯都用大写###############################</span></span><br><span class="line"><span class="comment"># 建议:在书写SQL语句的时候一定不要想着一次性成功 写一点看一点再写一点  慢慢拼凑起来</span></span><br><span class="line">-- <span class="number">1</span>、 查询所有的课程的名称以及对应的任课老师姓名</span><br><span class="line"><span class="comment"># 1.先明确需要的表	course表 teacher表</span></span><br><span class="line">-- 	select * <span class="keyword">from</span> course;</span><br><span class="line">-- 	select * <span class="keyword">from</span> teacher;</span><br><span class="line"><span class="comment"># 2.连表操作 明确字段</span></span><br><span class="line">-- SELECT</span><br><span class="line">-- 	course.cname,</span><br><span class="line">-- 	teacher.tname</span><br><span class="line">-- FROM</span><br><span class="line">-- 	course</span><br><span class="line">-- 	INNER JOIN teacher ON course.teacher_id = teacher.tid;</span><br><span class="line">-- <span class="number">4</span>、 查询平均成绩大于八十分的同学的姓名和平均成绩</span><br><span class="line"><span class="comment"># 1.先查看成绩表 </span></span><br><span class="line">-- 	select * <span class="keyword">from</span> score;</span><br><span class="line"><span class="comment"># 2.求所有学生的平均成绩</span></span><br><span class="line">-- 	select score.student_id,avg(num) <span class="keyword">from</span> score group by score.student_id;</span><br><span class="line"><span class="comment"># 3.筛选出大于80分</span></span><br><span class="line">-- 	select score.student_id,avg(num) <span class="keyword">as</span> <span class="string">&#x27;avg_num&#x27;</span> <span class="keyword">from</span> score group by score.student_id having avg(num)&gt;<span class="number">80</span></span><br><span class="line">-- 	;</span><br><span class="line"><span class="comment"># 4.学生表与上述查询出来的表连接</span></span><br><span class="line">-- SELECT</span><br><span class="line">-- 	student.sname,</span><br><span class="line">-- 	t1.avg_num </span><br><span class="line">-- FROM</span><br><span class="line">-- 	student</span><br><span class="line">-- 	INNER JOIN ( SELECT score.student_id, avg( num ) AS <span class="string">&#x27;avg_num&#x27;</span> FROM score GROUP BY score.student_id HAVING avg( num )&gt; <span class="number">80</span> ) AS t1 ON student.sid = t1.student_id;</span><br><span class="line">-- <span class="number">7</span>、 查询没有报李平老师课的学生姓名</span><br><span class="line"><span class="comment"># 1.正向思路:课下可以尝试一下</span></span><br><span class="line"><span class="comment"># 2.反向思路:先找所有报了李平老师课程的学生 再取反</span></span><br><span class="line"><span class="comment"># 1.先查询李平老师教授的课程id号</span></span><br><span class="line">-- select tid <span class="keyword">from</span> teacher WHERE tname=<span class="string">&#x27;李平老师&#x27;</span>;</span><br><span class="line">-- select cid <span class="keyword">from</span> course where teacher_id <span class="keyword">in</span> (select tid <span class="keyword">from</span> teacher WHERE tname=<span class="string">&#x27;李平老师&#x27;</span>);</span><br><span class="line"><span class="comment"># 2.去成绩表中筛选出所有报了李平老师课程的学生id号</span></span><br><span class="line">-- select distinct student_id <span class="keyword">from</span> score where course_id <span class="keyword">in</span> (select cid <span class="keyword">from</span> course where teacher_id <span class="keyword">in</span> (select tid <span class="keyword">from</span> teacher WHERE tname=<span class="string">&#x27;李平老师&#x27;</span>)); </span><br><span class="line"><span class="comment"># 3.去学生表中 取反获取没有报李平老师课程的学生姓名</span></span><br><span class="line">-- SELECT</span><br><span class="line">-- 	sname </span><br><span class="line">-- FROM</span><br><span class="line">-- 	student </span><br><span class="line">-- WHERE</span><br><span class="line">-- 	sid NOT IN (</span><br><span class="line">-- 	SELECT DISTINCT</span><br><span class="line">-- 		student_id </span><br><span class="line">-- 	FROM</span><br><span class="line">-- 		score </span><br><span class="line">-- 	WHERE</span><br><span class="line">-- 		course_id IN (</span><br><span class="line">-- 		SELECT</span><br><span class="line">-- 			cid </span><br><span class="line">-- 		FROM</span><br><span class="line">-- 			course </span><br><span class="line">-- 		WHERE</span><br><span class="line">-- 		teacher_id IN ( SELECT tid FROM teacher WHERE tname = <span class="string">&#x27;李平老师&#x27;</span> )));</span><br><span class="line">-- <span class="number">8</span>、 查询没有同时选修物理课程和体育课程的学生姓名(只要报了一门的 两门和都不报都不要)</span><br><span class="line"><span class="comment"># 1.先查询物理 和 体育课程的id号</span></span><br><span class="line">-- 	select cid <span class="keyword">from</span> course where cname <span class="keyword">in</span> (<span class="string">&#x27;物理&#x27;</span>,<span class="string">&#x27;体育&#x27;</span>);</span><br><span class="line"><span class="comment"># 2.去成绩表中先筛选出所有报了课程的数据(报了一门 报了两门)</span></span><br><span class="line">-- select * <span class="keyword">from</span> score where course_id <span class="keyword">in</span> (select cid <span class="keyword">from</span> course where cname <span class="keyword">in</span> (<span class="string">&#x27;物理&#x27;</span>,<span class="string">&#x27;体育&#x27;</span>));</span><br><span class="line"><span class="comment"># 3.按照学生id分组 统计每个学生报了的课程数目</span></span><br><span class="line">-- select student_id <span class="keyword">from</span> score where course_id <span class="keyword">in</span> (select cid <span class="keyword">from</span> course where cname <span class="keyword">in</span> (<span class="string">&#x27;物理&#x27;</span>,<span class="string">&#x27;体育&#x27;</span>))</span><br><span class="line">-- 	group by student_id</span><br><span class="line">-- 	having count(course_id) = <span class="number">1</span></span><br><span class="line">-- ;</span><br><span class="line"><span class="comment"># 4.去学生表中根据id获取学生姓名</span></span><br><span class="line">-- SELECT</span><br><span class="line">-- 	sname </span><br><span class="line">-- FROM</span><br><span class="line">-- 	student </span><br><span class="line">-- WHERE</span><br><span class="line">-- 	sid IN (</span><br><span class="line">-- 	SELECT</span><br><span class="line">-- 		student_id </span><br><span class="line">-- 	FROM</span><br><span class="line">-- 		score </span><br><span class="line">-- 	WHERE</span><br><span class="line">-- 		course_id IN (</span><br><span class="line">-- 		SELECT</span><br><span class="line">-- 			cid </span><br><span class="line">-- 		FROM</span><br><span class="line">-- 			course </span><br><span class="line">-- 		WHERE</span><br><span class="line">-- 		cname IN ( <span class="string">&#x27;物理&#x27;</span>, <span class="string">&#x27;体育&#x27;</span> ))</span><br><span class="line">-- 	group by student_id</span><br><span class="line">-- 	having count(course_id) = <span class="number">1</span>);</span><br><span class="line">-- <span class="number">9</span>、 查询挂科超过两门(包括两门)的学生姓名和班级</span><br><span class="line"><span class="comment"># 1.先去成绩表中 筛选出分数小于60分的数据</span></span><br><span class="line">-- select * <span class="keyword">from</span> score where num&lt;<span class="number">60</span>;</span><br><span class="line"><span class="comment"># 2.按照学生id分组 然后统计个数</span></span><br><span class="line">-- select student_id <span class="keyword">from</span> score where num&lt;<span class="number">60</span> group by student_id</span><br><span class="line">-- 	having count(num) &gt;= <span class="number">2</span></span><br><span class="line">-- ;</span><br><span class="line"><span class="comment"># 3.将班级表与学生表拼接起来</span></span><br><span class="line">SELECT</span><br><span class="line">	<span class="keyword">class</span>.caption,</span><br><span class="line">	student.sname </span><br><span class="line">FROM</span><br><span class="line">	<span class="keyword">class</span></span><br><span class="line">	<span class="title class_">INNER</span> JOIN student ON <span class="keyword">class</span>.cid = student.class_id </span><br><span class="line">WHERE</span><br><span class="line">	student.sid IN ( SELECT student_id FROM score WHERE num &lt; <span class="number">60</span> GROUP BY student_id HAVING count( num ) &gt;= <span class="number">2</span> );</span><br></pre></td></tr></table></figure>
<h2 id="作业布置"><a href="#作业布置" class="headerlink" title="作业布置"></a>作业布置</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>查询平均年龄在<span class="number">25</span>岁以上的部门名(表为之前查询关键字表)</span><br><span class="line"><span class="comment"># </span></span><br><span class="line">	分别运用子查询和连表操作完成上述题目</span><br><span class="line">SELECT name <span class="keyword">from</span> dep WHERE <span class="built_in">id</span> <span class="keyword">in</span> (SELECT dep_id <span class="keyword">from</span> emp GROUP BY dep_id HAVING AVG(age) &gt; <span class="number">25</span>);</span><br><span class="line">SELECT dep.name <span class="keyword">from</span> dep INNER JOIN emp ON dep.<span class="built_in">id</span> = emp.dep_id GROUP BY dep.name HAVING avg(emp.age) &gt; <span class="number">25</span>;</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>整理今日内容</span><br><span class="line"><span class="number">3.</span>彻底消化吸收课上练习题</span><br><span class="line"><span class="number">4.</span>数据库练习题大礼包(能做几道是几道 内附答案)</span><br><span class="line">	https://www.cnblogs.com/Dominic-Ji/p/<span class="number">10875493.</span>html</span><br></pre></td></tr></table></figure>



<h1 id="10-表字段操作补充"><a href="#10-表字段操作补充" class="headerlink" title="10 表字段操作补充"></a>10 表字段操作补充</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.添加表字段</span></span><br><span class="line">alter table 表名 add 字段名 字段类型 约束条件;  <span class="comment"># 默认尾部追加</span></span><br><span class="line">alter table 表名 add 字段名 字段类型 约束条件 after 已经存在的字段名; </span><br><span class="line">alter table 表名 add 字段名 字段类型 约束条件 first;  <span class="comment"># 了解 </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.修改字段</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;modify只能改字段数据类型完整约束，不能改字段名，但是change可以！&quot;&quot;&quot;</span></span><br><span class="line">ALTER TABLE 表名 </span><br><span class="line">                          MODIFY  字段名 数据类型 [完整性约束条件…];</span><br><span class="line">ALTER TABLE 表名 </span><br><span class="line">                          CHANGE 旧字段名 新字段名 数据类型 [完整性约束条件…];</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.删除字段</span></span><br><span class="line">ALTER TABLE 表名 </span><br><span class="line">                          DROP 字段名;</span><br></pre></td></tr></table></figure>

<h1 id="11-python操作MySQL-掌握"><a href="#11-python操作MySQL-掌握" class="headerlink" title="11 python操作MySQL(掌握)"></a>11 python操作MySQL(掌握)</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>下载模块</span><br><span class="line">	pip3 install pymysql</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">python默认下载模块的地址是国外的网站</span></span><br><span class="line"><span class="string">速度有时候会非常的慢 如果想要提升速度我们可以切换下载源</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line">（<span class="number">1</span>）阿里云 http://mirrors.aliyun.com/pypi/simple/</span><br><span class="line">（<span class="number">2</span>）豆瓣http://pypi.douban.com/simple/</span><br><span class="line">（<span class="number">3</span>）清华大学 https://pypi.tuna.tsinghua.edu.cn/simple/</span><br><span class="line">（<span class="number">4</span>）中国科学技术大学 http://pypi.mirrors.ustc.edu.cn/simple/</span><br><span class="line">（<span class="number">5</span>）华中科技大学http://pypi.hustunique.com/</span><br><span class="line"><span class="comment"># 1.命令行切换源</span></span><br><span class="line">	pip3 install pymysql -i 源地址</span><br><span class="line"><span class="comment"># 2.pycharm永久切换</span></span><br><span class="line">	file</span><br><span class="line">    	setting</span><br><span class="line">        	interpreter</span><br><span class="line">            	双击</span><br><span class="line">                	manage 仓库</span><br><span class="line">   </span><br><span class="line"><span class="number">2.</span>基本使用</span><br><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建链接对象</span></span><br><span class="line">conn = pymysql.connect(</span><br><span class="line">    host=<span class="string">&#x27;127.0.0.1&#x27;</span>,</span><br><span class="line">    port=<span class="number">3306</span>,</span><br><span class="line">    user=<span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">    password=<span class="string">&#x27;1&#x27;</span>,</span><br><span class="line">    database=<span class="string">&#x27;db4_3&#x27;</span>,</span><br><span class="line">    charset=<span class="string">&#x27;utf8&#x27;</span></span><br><span class="line">)</span><br><span class="line"><span class="comment"># 生成游标对象</span></span><br><span class="line">cursor = conn.cursor(cursor=pymysql.cursors.DictCursor)  <span class="comment"># 括号内不写参数是元祖组织不够明确</span></span><br><span class="line"><span class="comment"># 定义SQL语句</span></span><br><span class="line"><span class="comment"># sql = &#x27;show tables&#x27;</span></span><br><span class="line">sql = <span class="string">&#x27;select * from teacher&#x27;</span></span><br><span class="line"><span class="comment"># 执行sql语句</span></span><br><span class="line">affect_rows = cursor.execute(sql)</span><br><span class="line"><span class="built_in">print</span>(affect_rows)  <span class="comment"># 执行SQL语句所影响的行数</span></span><br><span class="line"><span class="comment"># 获取结果</span></span><br><span class="line">res = cursor.fetchall()</span><br><span class="line"><span class="built_in">print</span>(res)</span><br></pre></td></tr></table></figure>

<h1 id="12-SQL注入"><a href="#12-SQL注入" class="headerlink" title="12 SQL注入"></a>12 SQL注入</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">利用特殊符号的组合绕过相应的机制</span><br><span class="line"></span><br><span class="line">如何解决</span><br><span class="line">	不要自己手动处理敏感数据</span><br><span class="line"> </span><br><span class="line">sql = <span class="string">&quot;select * from userinfo where name=%s and password=%s&quot;</span></span><br><span class="line"><span class="comment"># 执行sql语句</span></span><br><span class="line">cursor.execute(sql,(username,password))  <span class="comment"># 交由execute自动拼接 自动筛选</span></span><br></pre></td></tr></table></figure>

<h1 id="13-其他操作"><a href="#13-其他操作" class="headerlink" title="13 其他操作"></a>13 其他操作</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">针对增删改查</span><br><span class="line">	查重要程度很低 无序二次确认</span><br><span class="line">    增改删重要程度很高 都需要二次确认</span><br><span class="line"> conn = pymysql.connect(</span><br><span class="line">    host=<span class="string">&#x27;127.0.0.1&#x27;</span>,</span><br><span class="line">    port=<span class="number">3306</span>,</span><br><span class="line">    user=<span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">    password=<span class="string">&#x27;1&#x27;</span>,</span><br><span class="line">    database=<span class="string">&#x27;db5&#x27;</span>,</span><br><span class="line">    charset=<span class="string">&#x27;utf8&#x27;</span>,</span><br><span class="line">    autocommit=<span class="literal">True</span>  <span class="comment"># 自动二次确认</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h1 id="14-视图"><a href="#14-视图" class="headerlink" title="14 视图"></a>14 视图</h1><h2 id="14-1-致命三问"><a href="#14-1-致命三问" class="headerlink" title="14.1 致命三问"></a>14.1 致命三问</h2><h3 id="14-1-1-什么是视图"><a href="#14-1-1-什么是视图" class="headerlink" title="14.1.1 什么是视图"></a>14.1.1 什么是视图</h3><p>视图就是通过查询得到一张虚拟表，然后保存下来，下次直接使用即可</p>
<h3 id="14-1-2-为什么要用视图"><a href="#14-1-2-为什么要用视图" class="headerlink" title="14.1.2 为什么要用视图"></a>14.1.2 为什么要用视图</h3><p>如果要频繁使用一张虚拟表，可以不用重复查询</p>
<h4 id="14-1-3如何用视图"><a href="#14-1-3如何用视图" class="headerlink" title="14.1.3如何用视图"></a>14.1.3如何用视图</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">create view teacher2course as</span><br><span class="line">select * from teacher inner join course on teacher.tid = course.teacher_id;</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">创建好了之后 验证它的存在navicat验证 cmd终端验证</span><br><span class="line">最后文件验证 得出下面的结论 视图只有表结构数据还是来源于之前的表</span><br><span class="line">delete from teacher2course where id=1;</span><br><span class="line">&quot;&quot;&quot;</span><br></pre></td></tr></table></figure>

<p><strong>强调</strong> 1、在硬盘中，视图只有表结构文件，没有表数据文件 2、视图通常是用于查询，尽量不要修改视图中的数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">drop view teacher2course;</span><br></pre></td></tr></table></figure>

<p><strong>思考:开发过程中会不会去使用视图？</strong></p>
<p>不会！视图是mysql的功能，如果你的项目里面大量的使用到了视图，那意味着你后期想要扩张某个功能的时候这个功能恰巧又需要对视图进行修改，意味着你需要先在mysql这边将视图先修改一下，然后再去应用程序中修改对应的sql语句，这就涉及到跨部门沟通的问题，所以通常不会使用视图，而是通过重新修改sql语句来扩展功能</p>
<h1 id="15-触发器"><a href="#15-触发器" class="headerlink" title="15 触发器"></a>15 触发器</h1><h2 id="15-1-致命三问"><a href="#15-1-致命三问" class="headerlink" title="15.1 致命三问"></a>15.1 致命三问</h2><h3 id="15-1-1-什么是触发器"><a href="#15-1-1-什么是触发器" class="headerlink" title="15.1.1 什么是触发器"></a>15.1.1 什么是触发器</h3><p>在满足对某张表数据的增、删、改的情况下，自动触发的功能称之为触发器</p>
<h3 id="15-1-2-为何要用触发器"><a href="#15-1-2-为何要用触发器" class="headerlink" title="15.1.2  为何要用触发器"></a>15.1.2  为何要用触发器</h3><p>触发器专门针对我们对某一张表数据增insert、删delete、改update的行为，这类行为一旦执行<br>就会触发触发器的执行，即自动运行另外一段sql代码</p>
<h3 id="15-1-3-如何用触发器"><a href="#15-1-3-如何用触发器" class="headerlink" title="15.1.3 如何用触发器"></a>15.1.3 如何用触发器</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line">&quot;&quot;&quot;语法结构</span><br><span class="line">create trigger 触发器的名字 before/after insert/update/delete on 表名 for each row</span><br><span class="line">begin</span><br><span class="line">	sql语句</span><br><span class="line">end</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line"># 针对插入</span><br><span class="line">create trigger tri_after_insert_t1 after insert on 表名 for each row</span><br><span class="line">begin</span><br><span class="line">    sql代码。。。</span><br><span class="line">end </span><br><span class="line">create trigger tri_after_insert_t2 before insert on 表名 for each row</span><br><span class="line">begin</span><br><span class="line">    sql代码。。。</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line"># 针对删除</span><br><span class="line">create trigger tri_after_delete_t1 after delete on 表名 for each row</span><br><span class="line">begin</span><br><span class="line">    sql代码。。。</span><br><span class="line">end</span><br><span class="line">create trigger tri_after_delete_t2 before delete on 表名 for each row</span><br><span class="line">begin</span><br><span class="line">    sql代码。。。</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line"># 针对修改</span><br><span class="line">create trigger tri_after_update_t1 after update on 表名 for each row</span><br><span class="line">begin</span><br><span class="line">    sql代码。。。</span><br><span class="line">end</span><br><span class="line">create trigger tri_after_update_t2 before update on 表名 for each row</span><br><span class="line">begin</span><br><span class="line">    sql代码。。。</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">需要注意 在书写sql代码的时候结束符是; 而整个触发器的结束也需要分号;</span><br><span class="line">这就会出现语法冲突 需要我们临时修改结束符号</span><br><span class="line">delimiter $$</span><br><span class="line">delimiter ; </span><br><span class="line">该语法只在当前窗口有效  </span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line"># 案例</span><br><span class="line">CREATE TABLE cmd (</span><br><span class="line">    id INT PRIMARY KEY auto_increment,</span><br><span class="line">    USER CHAR (32),</span><br><span class="line">    priv CHAR (10),</span><br><span class="line">    cmd CHAR (64),</span><br><span class="line">    sub_time datetime, #提交时间</span><br><span class="line">    success enum (&#x27;yes&#x27;, &#x27;no&#x27;) #0代 o   	  </span><br><span class="line"></span><br><span class="line">delimiter $$  # 将mysql默认的结束符由;换成$$</span><br><span class="line">create trigger tri_after_insert_cmd after insert on cmd for each row</span><br><span class="line">begin</span><br><span class="line">    if NEW.success = &#x27;no&#x27; then  # 新记录都会被MySQL封装成NEW对象</span><br><span class="line">        insert into errlog(err_cmd,err_time) values(NEW.cmd,NEW.sub_time);</span><br><span class="line">    end if;</span><br><span class="line">end $$</span><br><span class="line">delimiter ;  # 结束之后记得再改回来，不然后面结束符就都是$$了</span><br><span class="line"></span><br><span class="line">#往表cmd中插入记录，触发触发器，根据IF的条件决定是否插入错误日志</span><br><span class="line">INSERT INTO cmd (</span><br><span class="line">    USER,</span><br><span class="line">    priv,</span><br><span class="line">    cmd,</span><br><span class="line">    sub_time,</span><br><span class="line">    success</span><br><span class="line">)</span><br><span class="line">VALUES</span><br><span class="line">    (&#x27;egon&#x27;,&#x27;0755&#x27;,&#x27;ls -l /etc&#x27;,NOW(),&#x27;yes&#x27;),</span><br><span class="line">    (&#x27;egon&#x27;,&#x27;0755&#x27;,&#x27;cat /etc/passwd&#x27;,NOW(),&#x27;no&#x27;),</span><br><span class="line">    (&#x27;egon&#x27;,&#x27;0755&#x27;,&#x27;useradd xxx&#x27;,NOW(),&#x27;no&#x27;),</span><br><span class="line">    (&#x27;egon&#x27;,&#x27;0755&#x27;,&#x27;ps aux&#x27;,NOW(),&#x27;yes&#x27;);</span><br><span class="line"></span><br><span class="line"># 查询errlog表记录</span><br><span class="line">select * from errlog;</span><br><span class="line"># 删除触发器</span><br><span class="line">drop trigger tri_after_insert_cmd;</span><br></pre></td></tr></table></figure>

<h1 id="16-事务"><a href="#16-事务" class="headerlink" title="16 事务"></a>16 事务</h1><h2 id="16-1-致命三问"><a href="#16-1-致命三问" class="headerlink" title="16.1 致命三问"></a>16.1 致命三问</h2><h3 id="16-1-1-什么是事务"><a href="#16-1-1-什么是事务" class="headerlink" title="16.1.1 什么是事务"></a>16.1.1 什么是事务</h3><p>开启一个事务可以包含一些sql语句，这些sql语句要么同时成功<br>要么一个都别想成功，称之为事务的原子性</p>
<h3 id="16-1-2-事务的作用"><a href="#16-1-2-事务的作用" class="headerlink" title="16.1.2 事务的作用"></a>16.1.2 事务的作用</h3><p>保证了对数据操作的数据安全性<br>案例:用交行的卡操作建行ATM机给工商的账户转钱</p>
<p>**事务应该具有4个属性：**原子性、一致性、隔离性、持久性。这四个属性通常称为**ACID特性**。</p>
<p>原子性（atomicity）。一个事务是一个不可分割的工作单位，事务中包括的诸操作要么都做，要么都不做。</p>
<p>一致性（consistency）。事务必须是使数据库从一个一致性状态变到另一个一致性状态。一致性与原子性是密切相关的。</p>
<p>隔离性（isolation）。一个事务的执行不能被其他事务干扰。即一个事务内部的操作及使用的数据对并发的其他事务是隔离的，并发执行的各个事务之间不能互相干扰。</p>
<p>持久性（durability）。持久性也称永久性（permanence），指一个事务一旦提交，它对数据库中数据的改变就应该是永久性的。接下来的其他操作或故障不应该对其有任何影响。</p>
<h3 id="16-1-3-如何用事务"><a href="#16-1-3-如何用事务" class="headerlink" title="16.1.3 如何用事务"></a>16.1.3 如何用事务</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"># 先介绍事务的三个关键字 再去用表实际展示效果</span><br><span class="line"></span><br><span class="line">create table user(</span><br><span class="line">id int primary key auto_increment,</span><br><span class="line">name char(32),</span><br><span class="line">balance int</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">a</span><br><span class="line"></span><br><span class="line"># 修改数据之前先开启事务操作</span><br><span class="line">start transaction;</span><br><span class="line"></span><br><span class="line"># 修改操作</span><br><span class="line">update user set balance=900 where name=&#x27;jason&#x27;; #买支付100元</span><br><span class="line">update user set balance=1010 where name=&#x27;egon&#x27;; #中介拿走10元</span><br><span class="line">update user set balance=1090 where name=&#x27;tank&#x27;; #卖家拿到90元</span><br><span class="line"></span><br><span class="line"># 回滚到上一个状态</span><br><span class="line">rollback;</span><br><span class="line"></span><br><span class="line"># 开启事务之后，只要没有执行commit操作，数据其实都没有真正刷新到硬盘</span><br><span class="line">commit;</span><br><span class="line">&quot;&quot;&quot;开启事务检测操作是否完整，不完整主动回滚到上一个状态，如果完整就应该执行commit操作&quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line"># 站在python代码的角度，应该实现的伪代码逻辑，</span><br><span class="line">try:</span><br><span class="line">    update user set balance=900 where name=&#x27;jason&#x27;; #买支付100元</span><br><span class="line">    update user set balance=1010 where name=&#x27;egon&#x27;; #中介拿走10元</span><br><span class="line">    update user set balance=1090 where name=&#x27;tank&#x27;; #卖家拿到90元</span><br><span class="line">except 异常:</span><br><span class="line">    rollback;</span><br><span class="line">else:</span><br><span class="line">    commit;</span><br><span class="line"></span><br><span class="line"># 那如何检测异常？</span><br></pre></td></tr></table></figure>

<h1 id="17-存储过程"><a href="#17-存储过程" class="headerlink" title="17 存储过程"></a>17 存储过程</h1><p>存储过程包含了一系列可执行的sql语句，存储过程存放于MySQL中，通过调用它的名字可以执行其内部的一堆sql,类似于python中的自定义函数</p>
<h2 id="17-1-基本使用"><a href="#17-1-基本使用" class="headerlink" title="17.1 基本使用"></a>17.1 基本使用</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">delimiter $$</span><br><span class="line">create procedure p1()</span><br><span class="line">begin</span><br><span class="line">	select * <span class="keyword">from</span> user;</span><br><span class="line">end $$</span><br><span class="line">delimiter ;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 调用</span></span><br><span class="line">call p1()</span><br></pre></td></tr></table></figure>

<h2 id="17-2-三种开发模型"><a href="#17-2-三种开发模型" class="headerlink" title="17.2  三种开发模型"></a>17.2  三种开发模型</h2><h3 id="17-2-1-第一种"><a href="#17-2-1-第一种" class="headerlink" title="17.2.1 第一种"></a>17.2.1 第一种</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">应用程序：只需要开发应用程序的逻辑</span></span><br><span class="line"><span class="string">mysql:编写好存储过程，以供应用程序调用</span></span><br><span class="line"><span class="string">优点：开发效率，执行效率都高</span></span><br><span class="line"><span class="string">缺点：考虑到人为因素、跨部门沟通等问题，会导致扩展性差</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="17-2-2-第二种"><a href="#17-2-2-第二种" class="headerlink" title="17.2.2 第二种"></a>17.2.2 第二种</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">应用程序：除了开发应用程序的逻辑，还需要编写原生sql</span></span><br><span class="line"><span class="string">优点：比方式1，扩展性高(非技术性的)</span></span><br><span class="line"><span class="string">缺点：</span></span><br><span class="line"><span class="string">1、开发效率，执行效率都不如方式1</span></span><br><span class="line"><span class="string">2、编写原生sql太过于复杂，而且需要考虑到sql语句的优化问题</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="17-2-3-第三种"><a href="#17-2-3-第三种" class="headerlink" title="17.2.3 第三种"></a>17.2.3 第三种</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">应用程序：开发应用程序的逻辑，不需要编写原生sql，基于别人编写好的框架来处理数据，ORM</span></span><br><span class="line"><span class="string">优点：不用再编写纯生sql，这意味着开发效率比方式2高，同时兼容方式2扩展性高的好处</span></span><br><span class="line"><span class="string">缺点：执行效率连方式2都比不过</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="17-3-创建存储过程"><a href="#17-3-创建存储过程" class="headerlink" title="17.3  创建存储过程"></a>17.3  <strong>创建存储过程</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"># 介绍形参特点  再写具体功能</span><br><span class="line"></span><br><span class="line">delimiter $$</span><br><span class="line">create procedure p2(</span><br><span class="line">    in m int,  # in表示这个参数必须只能是传入不能被返回出去</span><br><span class="line">    in n int,  </span><br><span class="line">    out res int  # out表示这个参数可以被返回出去</span><br><span class="line">)</span><br><span class="line">begin</span><br><span class="line">    select tname from teacher where tid &gt; m and tid &lt; n;</span><br><span class="line">    set res=0;  # 用来标志存储过程是否执行</span><br><span class="line">end $$</span><br><span class="line">delimiter ;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 针对res需要先提前定义</span><br><span class="line">set @res=10;  定义</span><br><span class="line">select @res;  查看</span><br><span class="line">call p1(1,5,@res)  调用</span><br><span class="line">select @res  查看</span><br></pre></td></tr></table></figure>

<h3 id="17-4-如何用存储过程"><a href="#17-4-如何用存储过程" class="headerlink" title="17.4 如何用存储过程"></a>17.4 如何用存储过程</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"># 大前提:存储过程在哪个库下面创建的只能在对应的库下面才能使用！！！</span><br><span class="line"></span><br><span class="line"># 1、直接在mysql中调用</span><br><span class="line">set @res=10  # res的值是用来判断存储过程是否被执行成功的依据，所以需要先定义一个变量@res存储10</span><br><span class="line">call p1(2,4,10);  # 报错</span><br><span class="line">call p1(2,4,@res);  </span><br><span class="line"></span><br><span class="line"># 查看结果</span><br><span class="line">select @res;  # 执行成功，@res变量值发生了变化</span><br><span class="line"></span><br><span class="line"># 2、在python程序中调用</span><br><span class="line">pymysql链接mysql</span><br><span class="line">产生的游表cursor.callproc(&#x27;p1&#x27;,(2,4,10))  # 内部原理：@_p1_0=2,@_p1_1=4,@_p1_2=10;</span><br><span class="line">cursor.excute(&#x27;select @_p1_2;&#x27;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 3、存储过程与事务使用举例(了解)</span><br><span class="line">delimiter //</span><br><span class="line">create PROCEDURE p5(</span><br><span class="line">    OUT p_return_code tinyint</span><br><span class="line">)</span><br><span class="line">BEGIN</span><br><span class="line">    DECLARE exit handler for sqlexception</span><br><span class="line">    BEGIN</span><br><span class="line">        -- ERROR</span><br><span class="line">        set p_return_code = 1;</span><br><span class="line">        rollback;</span><br><span class="line">    END;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  DECLARE exit handler for sqlwarning</span><br><span class="line">  BEGIN</span><br><span class="line">      -- WARNING</span><br><span class="line">      set p_return_code = 2;</span><br><span class="line">      rollback;</span><br><span class="line">  END;</span><br><span class="line"></span><br><span class="line">  START TRANSACTION;</span><br><span class="line">      update user set balance=900 where id =1;</span><br><span class="line">      update user123 set balance=1010 where id = 2;</span><br><span class="line">      update user set balance=1090 where id =3;</span><br><span class="line">  COMMIT;</span><br><span class="line"></span><br><span class="line">  -- SUCCESS</span><br><span class="line">  set p_return_code = 0; #0代表执行成功</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">END //</span><br><span class="line">delimiter ;</span><br></pre></td></tr></table></figure>

<h1 id="18-函数"><a href="#18-函数" class="headerlink" title="18 函数"></a>18 函数</h1><p>注意与存储过程的区别，mysql内置的函数只能在sql语句中使用！</p>
<p>参考博客：<a target="_blank" rel="noopener" href="http://www.cnblogs.com/linhaifeng/articles/7495918.html#_label2">http://www.cnblogs.com/linhaifeng/articles/7495918.html#_label2</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE blog (</span><br><span class="line">    id INT PRIMARY KEY auto_increment,</span><br><span class="line">    NAME CHAR (32),</span><br><span class="line">    sub_time datetime</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">INSERT INTO blog (NAME, sub_time)</span><br><span class="line">VALUES</span><br><span class="line">    (&#x27;第1篇&#x27;,&#x27;2015-03-01 11:31:21&#x27;),</span><br><span class="line">    (&#x27;第2篇&#x27;,&#x27;2015-03-11 16:31:21&#x27;),</span><br><span class="line">    (&#x27;第3篇&#x27;,&#x27;2016-07-01 10:21:31&#x27;),</span><br><span class="line">    (&#x27;第4篇&#x27;,&#x27;2016-07-22 09:23:21&#x27;),</span><br><span class="line">    (&#x27;第5篇&#x27;,&#x27;2016-07-23 10:11:11&#x27;),</span><br><span class="line">    (&#x27;第6篇&#x27;,&#x27;2016-07-25 11:21:31&#x27;),</span><br><span class="line">    (&#x27;第7篇&#x27;,&#x27;2017-03-01 15:33:21&#x27;),</span><br><span class="line">    (&#x27;第8篇&#x27;,&#x27;2017-03-01 17:32:21&#x27;),</span><br><span class="line">    (&#x27;第9篇&#x27;,&#x27;2017-03-01 18:31:21&#x27;);</span><br><span class="line"></span><br><span class="line">select date_format(sub_time,&#x27;%Y-%m&#x27;),count(id) from blog group by date_format(sub_time,&#x27;%Y-%m&#x27;);</span><br></pre></td></tr></table></figure>

<h1 id="19-流程控制"><a href="#19-流程控制" class="headerlink" title="19 流程控制"></a>19 流程控制</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"># if条件语句</span><br><span class="line">delimiter //</span><br><span class="line">CREATE PROCEDURE proc_if ()</span><br><span class="line">BEGIN</span><br><span class="line">    </span><br><span class="line">    declare i int default 0;</span><br><span class="line">    if i = 1 THEN</span><br><span class="line">        SELECT 1;</span><br><span class="line">    ELSEIF i = 2 THEN</span><br><span class="line">        SELECT 2;</span><br><span class="line">    ELSE</span><br><span class="line">        SELECT 7;</span><br><span class="line">    END IF;</span><br><span class="line"></span><br><span class="line">END //</span><br><span class="line">delimiter ;</span><br><span class="line"># while循环</span><br><span class="line">delimiter //</span><br><span class="line">CREATE PROCEDURE proc_while ()</span><br><span class="line">BEGIN</span><br><span class="line"></span><br><span class="line">    DECLARE num INT ;</span><br><span class="line">    SET num = 0 ;</span><br><span class="line">    WHILE num &lt; 10 DO</span><br><span class="line">        SELECT</span><br><span class="line">            num ;</span><br><span class="line">        SET num = num + 1 ;</span><br><span class="line">    END WHILE ;</span><br><span class="line"></span><br><span class="line">END //</span><br><span class="line">delimiter ;</span><br></pre></td></tr></table></figure>

<h1 id="20-索引"><a href="#20-索引" class="headerlink" title="20 索引"></a>20 索引</h1><h2 id="20-1-索引基础"><a href="#20-1-索引基础" class="headerlink" title="20.1 索引基础"></a>20.1 索引基础</h2><p>知识回顾:数据都是存在硬盘上的，那查询数据不可避免的需要进行IO操作</p>
<p>索引就是一种数据结构，类似于书的目录。意味着以后再查数据应该先找目录再找数据，而不是用翻页的方式查询数据</p>
<p><em>索引在MySQL中也叫做“键”，是存储引擎用于快速找到记录的一种数据结构。</em></p>
<ul>
<li>primary key</li>
<li>unique key</li>
<li>index key</li>
</ul>
<p>注意foreign key不是用来加速查询用的，不在我们研究范围之内,上面三种key前两种除了有加速查询的效果之外还有额外的约束条件(primary key:非空且唯一，unique key:唯一)，而index key没有任何约束功能只会帮你加速查询</p>
<p><strong>本质都是：通过不断地缩小想要获取数据的范围来筛选出最终想要的结果，同时把随机的事件变成顺序的事件，也就是说，有了这种索引机制，我们可以总是用同一种查找方式来锁定数据。</strong></p>
<p><strong>索引的影响:</strong></p>
<ul>
<li>在表中有大量数据的前提下，创建索引速度会很慢</li>
<li>在索引创建完毕后，对表的查询性能会大幅度提升，但是写的性能会降低</li>
</ul>
<h2 id="20-2-b-树"><a href="#20-2-b-树" class="headerlink" title="20.2 b+树"></a>20.2 b+树</h2><p><a target="_blank" rel="noopener" href="https://images2017.cnblogs.com/blog/1036857/201709/1036857-20170912011123500-158121126.png">https://images2017.cnblogs.com/blog/1036857/201709/1036857-20170912011123500-158121126.png</a></p>
<p>只有叶子结点存放真实数据，根和树枝节点存的仅仅是虚拟数据</p>
<p>查询次数由树的层级决定，层级越低次数越少</p>
<p>一个磁盘块儿的大小是一定的，那也就意味着能存的数据量是一定的。如何保证树的层级最低呢？一个磁盘块儿存放占用空间比较小的数据项</p>
<p>思考我们应该给我们一张表里面的什么字段字段建立索引能够降低树的层级高度&gt;&gt;&gt; 主键id字段</p>
<h2 id="20-3-聚集索引-primary-key"><a href="#20-3-聚集索引-primary-key" class="headerlink" title="20.3 聚集索引(primary key)"></a>20.3 <strong>聚集索引(primary key)</strong></h2><p>聚集索引其实指的就是表的主键，innodb引擎规定一张表中必须要有主键。先来回顾一下存储引擎。</p>
<p>myisam在建表的时候对应到硬盘有几个文件(三个)？</p>
<p>innodb在建表的时候对应到硬盘有几个文件(两个)？frm文件只存放表结构，不可能放索引，也就意味着innodb的索引跟数据都放在idb表数据文件中。</p>
<p>**特点:**叶子结点放的一条条完整的记录</p>
<h2 id="20-4-辅助索引-unique-index"><a href="#20-4-辅助索引-unique-index" class="headerlink" title="20.4 辅助索引(unique,index)"></a>20.4 辅助索引(unique,index)</h2><p>辅助索引:查询数据的时候不可能都是用id作为筛选条件，也可能会用name，password等字段信息，那么这个时候就无法利用到聚集索引的加速查询效果。就需要给其他字段建立索引，这些索引就叫辅助索引</p>
<p><strong>特点：</strong>叶子结点存放的是辅助索引字段对应的那条记录的主键的值(比如:按照name字段创建索引，那么叶子节点存放的是:{name对应的值:name所在的那条记录的主键值})</p>
<p>select name from user where name=’jason’;</p>
<p>上述语句叫覆盖索引:只在辅助索引的叶子节点中就已经找到了所有我们想要的数据</p>
<p>select age from user where name=’jason’;</p>
<p>上述语句叫非覆盖索引,虽然查询的时候命中了索引字段name，但是要查的是age字段，所以还需要利用主键才去查找</p>
<h2 id="20-5-测试索引"><a href="#20-5-测试索引" class="headerlink" title="20.5 测试索引"></a>20.5 测试索引</h2><p><strong>准备</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line">#1. 准备表</span><br><span class="line">create table s1(</span><br><span class="line">id int,</span><br><span class="line">name varchar(20),</span><br><span class="line">gender char(6),</span><br><span class="line">email varchar(50)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">#2. 创建存储过程，实现批量插入记录</span><br><span class="line">delimiter $$ #声明存储过程的结束符号为$$</span><br><span class="line">create procedure auto_insert1()</span><br><span class="line">BEGIN</span><br><span class="line">    declare i int default 1;</span><br><span class="line">    while(i&lt;3000000)do</span><br><span class="line">        insert into s1 values(i,&#x27;jason&#x27;,&#x27;male&#x27;,concat(&#x27;jason&#x27;,i,&#x27;@oldboy&#x27;));</span><br><span class="line">        set i=i+1;</span><br><span class="line">    end while;</span><br><span class="line">END$$ #$$结束</span><br><span class="line">delimiter ; #重新声明分号为结束符号</span><br><span class="line"></span><br><span class="line">#3. 查看存储过程</span><br><span class="line">show create procedure auto_insert1\G </span><br><span class="line"></span><br><span class="line">#4. 调用存储过程</span><br><span class="line">call auto_insert1();</span><br><span class="line"># 表没有任何索引的情况下</span><br><span class="line">select * from s1 where id=30000;</span><br><span class="line"># 避免打印带来的时间损耗</span><br><span class="line">select count(id) from s1 where id = 30000;</span><br><span class="line">select count(id) from s1 where id = 1;</span><br><span class="line"></span><br><span class="line"># 给id做一个主键</span><br><span class="line">alter table s1 add primary key(id);  # 速度很慢</span><br><span class="line"></span><br><span class="line">select count(id) from s1 where id = 1;  # 速度相较于未建索引之前两者差着数量级</span><br><span class="line">select count(id) from s1 where name = &#x27;jason&#x27;  # 速度仍然很慢</span><br><span class="line"></span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">范围问题</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line"># 并不是加了索引，以后查询的时候按照这个字段速度就一定快   </span><br><span class="line">select count(id) from s1 where id &gt; 1;  # 速度相较于id = 1慢了很多</span><br><span class="line">select count(id) from s1 where id &gt;1 and id &lt; 3;</span><br><span class="line">select count(id) from s1 where id &gt; 1 and id &lt; 10000;</span><br><span class="line">select count(id) from s1 where id != 3;</span><br><span class="line"></span><br><span class="line">alter table s1 drop primary key;  # 删除主键 单独再来研究name字段</span><br><span class="line">select count(id) from s1 where name = &#x27;jason&#x27;;  # 又慢了</span><br><span class="line"></span><br><span class="line">create index idx_name on s1(name);  # 给s1表的name字段创建索引</span><br><span class="line">select count(id) from s1 where name = &#x27;jason&#x27;  # 仍然很慢！！！</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">再来看b+树的原理，数据需要区分度比较高，而我们这张表全是jason，根本无法区分</span><br><span class="line">那这个树其实就建成了“一根棍子”</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">select count(id) from s1 where name = &#x27;xxx&#x27;;  </span><br><span class="line"># 这个会很快，我就是一根棍，第一个不匹配直接不需要再往下走了</span><br><span class="line">select count(id) from s1 where name like &#x27;xxx&#x27;;</span><br><span class="line">select count(id) from s1 where name like &#x27;xxx%&#x27;;</span><br><span class="line">select count(id) from s1 where name like &#x27;%xxx&#x27;;  # 慢 最左匹配特性</span><br><span class="line"></span><br><span class="line"># 区分度低的字段不能建索引</span><br><span class="line">drop index idx_name on s1;</span><br><span class="line"></span><br><span class="line"># 给id字段建普通的索引</span><br><span class="line">create index idx_id on s1(id);</span><br><span class="line">select count(id) from s1 where id = 3;  # 快了</span><br><span class="line">select count(id) from s1 where id*12 = 3;  # 慢了  索引的字段一定不要参与计算</span><br><span class="line"></span><br><span class="line">drop index idx_id on s1;</span><br><span class="line">select count(id) from s1 where name=&#x27;jason&#x27; and gender = &#x27;male&#x27; and id = 3 and email = &#x27;xxx&#x27;;</span><br><span class="line"># 针对上面这种连续多个and的操作，mysql会从左到右先找区分度比较高的索引字段，先将整体范围降下来再去比较其他条件</span><br><span class="line">create index idx_name on s1(name);</span><br><span class="line">select count(id) from s1 where name=&#x27;jason&#x27; and gender = &#x27;male&#x27; and id = 3 and email = &#x27;xxx&#x27;;  # 并没有加速</span><br><span class="line"></span><br><span class="line">drop index idx_name on s1;</span><br><span class="line"># 给name，gender这种区分度不高的字段加上索引并不难加快查询速度</span><br><span class="line"></span><br><span class="line">create index idx_id on s1(id);</span><br><span class="line">select count(id) from s1 where name=&#x27;jason&#x27; and gender = &#x27;male&#x27; and id = 3 and email = &#x27;xxx&#x27;;  # 快了  先通过id已经讲数据快速锁定成了一条了</span><br><span class="line">select count(id) from s1 where name=&#x27;jason&#x27; and gender = &#x27;male&#x27; and id &gt; 3 and email = &#x27;xxx&#x27;;  # 慢了  基于id查出来的数据仍然很多，然后还要去比较其他字段</span><br><span class="line"></span><br><span class="line">drop index idx_id on s1</span><br><span class="line"></span><br><span class="line">create index idx_email on s1(email);</span><br><span class="line">select count(id) from s1 where name=&#x27;jason&#x27; and gender = &#x27;male&#x27; and id &gt; 3 and email = &#x27;xxx&#x27;;  # 快 通过email字段一剑封喉 </span><br></pre></td></tr></table></figure>

<h2 id="20-6-联合索引"><a href="#20-6-联合索引" class="headerlink" title="20.6 联合索引"></a>20.6 联合索引</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">select count(id) from s1 where name=&#x27;jason&#x27; and gender = &#x27;male&#x27; and id &gt; 3 and email = &#x27;xxx&#x27;;  </span><br><span class="line"># 如果上述四个字段区分度都很高，那给谁建都能加速查询</span><br><span class="line"># 给email加然而不用email字段</span><br><span class="line">select count(id) from s1 where name=&#x27;jason&#x27; and gender = &#x27;male&#x27; and id &gt; 3; </span><br><span class="line"># 给name加然而不用name字段</span><br><span class="line">select count(id) from s1 where gender = &#x27;male&#x27; and id &gt; 3; </span><br><span class="line"># 给gender加然而不用gender字段</span><br><span class="line">select count(id) from s1 where id &gt; 3; </span><br><span class="line"></span><br><span class="line"># 带来的问题是所有的字段都建了索引然而都没有用到，还需要花费四次建立的时间</span><br><span class="line">create index idx_all on s1(email,name,gender,id);  # 最左匹配原则，区分度高的往左放</span><br><span class="line">select count(id) from s1 where name=&#x27;jason&#x27; and gender = &#x27;male&#x27; and id &gt; 3 and email = &#x27;xxx&#x27;;  # 速度变快</span><br></pre></td></tr></table></figure>

<p>总结:上面这些操作，你感兴趣可以敲一敲，不感兴趣你就可以不用敲了，权当看个乐呵。理论掌握了就行了</p>
<p>慢查询日志</p>
<p>设定一个时间检测所有超出该时间的sql语句，然后针对性的进行优化！</p>
<h2 id="20-7作业"><a href="#20-7作业" class="headerlink" title="20.7作业"></a>20.7作业</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>基于pymysql编写用户注册登录功能</span><br><span class="line">	ps:也可以将之前项目做优化</span><br></pre></td></tr></table></figure>

    </div>

    
    
    

    <footer class="post-footer"><div class="post-widgets">
      <div id="needsharebutton-postbottom">
        <span class="btn">
          <i class="fa fa-share-alt" aria-hidden="true"></i>
        </span>
      </div>
    </div>
          <div class="reward-container">
  <div>Buy me a coffee</div>
  <button>
    赞赏
  </button>
  <div class="post-reward">
      <div>
        <img src="/images/wechatpay.jpeg" alt="Michaeldong 微信">
        <span>微信</span>
      </div>
      <div>
        <img src="/images/alipay.jpeg" alt="Michaeldong 支付宝">
        <span>支付宝</span>
      </div>

  </div>
</div>

          <div class="post-tags">
              <a href="/tags/Python/" rel="tag"># Python</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2018/04/20/17.%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/" rel="prev" title="并发编程">
                  <i class="fa fa-chevron-left"></i> 并发编程
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2018/05/06/19.%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80%E4%B9%8BHTML/" rel="next" title="前端基础之HTML">
                  前端基础之HTML <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Michaeldong</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="站点总字数">1.2m</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">18:05</span>
  </span>
</div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  
<script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>
<script class="next-config" data-name="chatra" type="application/json">{"enable":true,"async":true,"id":"9D92XKxDbxTrStQPr"}</script>
<script src="/js/third-party/chat/chatra.js"></script>
<script async src="https://call.chatra.io/chatra.js"></script>





  





  <script src="//cdn.jsdelivr.net/gh/theme-next/theme-next-needmoreshare2@1/needsharebutton.min.js"></script>
  <script>
      pbOptions = {};
        pbOptions.iconStyle = "box";
        pbOptions.boxForm = "horizontal";
        pbOptions.position = "bottomCenter";
        pbOptions.networks = "Wechat,QQZone,Weibo,Douban,Twitter,Facebook";
      new needShareButton('#needsharebutton-postbottom', pbOptions);
  </script>
<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"log":false,"model":{"jsonPath":"/live2dw/assets/shizuku.model.json"},"display":{"position":"right","width":200,"height":300,"vOffset":300},"mobile":{"show":true},"dialog":{"enable":true,"hitokoto":true}});</script></body>
</html>
